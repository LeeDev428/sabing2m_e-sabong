import{c as X,r as i,j as t,a as G,H as Y}from"./app-C7qY2HDe.js";import{D as Z}from"./declarator-layout-BZ5-dRK0.js";import"./app-PBvFZhw_.js";function me(s){const e=X.c(52),{fights:V}=s,o=V===void 0?[]:V,[I,g]=i.useState(!1),[O,f]=i.useState(!1),[r,b]=i.useState(null),[a,d]=i.useState(null),[m,h]=i.useState(""),[x,u]=i.useState(""),[n,N]=i.useState(""),[c,q]=i.useState("");i.useEffect(()=>{const l=o.length>0?o[o.length-1]:null;l&&l.event_name&&(N(l.event_name),q(l.event_name))},[o]);let j;e[0]===Symbol.for("react.memo_cache_sentinel")?(j=[],e[0]=j):j=e[0],i.useEffect(ae,j);const P=o.filter(re),J=o.filter(le).length;let v;e[1]!==a||e[2]!==r||e[3]!==d||e[4]!==b||e[5]!==g?(v=()=>{!r||!a||G.post("/declarator/results",{fight_id:r.id,result:a},{onSuccess:()=>{g(!1),b(null),d(null)}})},e[1]=a,e[2]=r,e[3]=d,e[4]=b,e[5]=g,e[6]=v):v=e[6];const z=v;let w;e[7]!==n||e[8]!==c||e[9]!==m||e[10]!==h||e[11]!==f||e[12]!==u||e[13]!==x?(w=()=>{!m||!x||n&&c&&n!==c&&!confirm(`âš ï¸ Creating a new event will close/end the previous event.

New Event: "${n}"
Previous Event: "${c}"
Fight number will reset to #1
All previous fights will be closed.

Do you want to continue?`)||G.post("/declarator/fights/create-next",{meron_fighter:m,wala_fighter:x,event_name:n},{onSuccess:()=>{f(!1),h(""),u("")}})},e[7]=n,e[8]=c,e[9]=m,e[10]=h,e[11]=f,e[12]=u,e[13]=x,e[14]=w):w=e[14];const H=w;let _,S;e[15]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx(Y,{title:"Declarator Dashboard"}),S=t.jsx("br",{}),e[15]=_,e[16]=S):(_=e[15],S=e[16]);let F;e[17]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx("div",{className:"mb-6 lg:mb-8 flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl lg:text-3xl font-bold",children:"Declarator Dashboard"}),t.jsx("p",{className:"text-sm lg:text-base text-gray-400",children:"Declare fight results and manage outcomes"})]})}),e[17]=F):F=e[17];let C;e[18]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx("div",{className:"text-xs lg:text-sm text-gray-400 mb-2",children:"Pending Results"}),e[18]=C):C=e[18];let E;e[19]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Fights awaiting declaration"}),e[19]=E):E=e[19];let D;e[20]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx("div",{className:"text-xs lg:text-sm text-gray-400 mb-2",children:"Declared Today"}),e[20]=D):D=e[20];let A;e[21]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Results declared today"}),e[21]=A):A=e[21];let R;e[22]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx("div",{className:"text-xs lg:text-sm text-gray-400 mb-2",children:"Total Fights"}),e[22]=R):R=e[22];let k;e[23]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"All fight events"}),e[23]=k):k=e[23];let M;e[24]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsxs("div",{className:"p-4 lg:p-6 border-b border-gray-700",children:[t.jsx("h2",{className:"text-lg lg:text-xl font-bold",children:"Pending Declarations"}),t.jsx("p",{className:"text-xs lg:text-sm text-gray-400",children:"Fights with closed betting awaiting result declaration"})]}),e[24]=M):M=e[24];const U=P.length>0?t.jsx("div",{className:"space-y-4",children:P.map(l=>t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 flex items-center justify-between hover:bg-gray-600 transition-colors",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsxs("span",{className:"font-bold text-lg",children:["Fight #",l.fight_number]}),t.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-yellow-600",children:"â±ï¸ AWAITING RESULT"})]}),t.jsxs("div",{className:"flex items-center gap-4 text-sm mb-2",children:[t.jsxs("span",{className:"text-red-400 font-medium",children:["MERON: ",l.meron_fighter," (",l.meron_odds||"N/A",")"]}),t.jsx("span",{className:"text-gray-500",children:"vs"}),t.jsxs("span",{className:"text-blue-400 font-medium",children:["WALA: ",l.wala_fighter," (",l.wala_odds||"N/A",")"]})]}),l.betting_closed_at&&t.jsxs("div",{className:"text-xs text-gray-500",children:["Betting closed: ",new Date(l.betting_closed_at).toLocaleString()]})]}),t.jsx("button",{onClick:()=>{b(l),g(!0)},className:"px-6 py-3 bg-green-600 hover:bg-green-700 rounded-lg font-semibold",children:"ðŸ† Declare Result"})]},l.id))}):t.jsx("div",{className:"text-center py-12 text-gray-400",children:"No pending declarations. All fights have been processed."});let $;e[25]!==U?($=t.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700",children:[M,t.jsx("div",{className:"p-4 lg:p-6",children:U})]}),e[25]=U,e[26]=$):$=e[26];const K="mt-8 bg-gray-800 rounded-lg border border-gray-700";let p;e[27]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsxs("div",{className:"p-6 border-b border-gray-700",children:[t.jsx("h2",{className:"text-xl font-bold",children:"Recent Declarations"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Latest declared fight results"})]}),e[27]=p):p=e[27];const Q="p-6",B=o.filter(se).length>0?t.jsx("div",{className:"space-y-3",children:o.filter(te).slice(0,5).map(ee)}):t.jsx("div",{className:"text-center py-8 text-gray-400",children:"No declared results yet"});let y;e[28]!==B?(y=t.jsx("div",{className:Q,children:B}),e[28]=B,e[29]=y):y=e[29];let L;e[30]!==p||e[31]!==y?(L=t.jsxs("div",{className:K,children:[p,y]}),e[30]=p,e[31]=y,e[32]=L):L=e[32];let W;e[33]!==z||e[34]!==a||e[35]!==r||e[36]!==d||e[37]!==b||e[38]!==g||e[39]!==I?(W=I&&r&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full",children:[t.jsxs("div",{className:"p-6 border-b border-gray-700",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Declare Fight Result"}),t.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Fight #",r.fight_number,": ",r.meron_fighter," vs ",r.wala_fighter]})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[t.jsxs("button",{onClick:()=>d("meron"),className:`p-8 rounded-lg border-2 transition-all ${a==="meron"?"bg-red-600 border-red-400 scale-105":"bg-gray-700 border-gray-600 hover:border-red-400"}`,children:[t.jsx("div",{className:"text-3xl font-bold mb-2",children:"MERON"}),t.jsx("div",{className:"text-sm",children:r.meron_fighter}),t.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Odds: ",r.meron_odds||"N/A"]})]}),t.jsxs("button",{onClick:()=>d("wala"),className:`p-8 rounded-lg border-2 transition-all ${a==="wala"?"bg-blue-600 border-blue-400 scale-105":"bg-gray-700 border-gray-600 hover:border-blue-400"}`,children:[t.jsx("div",{className:"text-3xl font-bold mb-2",children:"WALA"}),t.jsx("div",{className:"text-sm",children:r.wala_fighter}),t.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Odds: ",r.wala_odds||"N/A"]})]}),t.jsxs("button",{onClick:()=>d("draw"),className:`p-8 rounded-lg border-2 transition-all ${a==="draw"?"bg-green-600 border-green-400 scale-105":"bg-gray-700 border-gray-600 hover:border-green-400"}`,children:[t.jsx("div",{className:"text-3xl font-bold mb-2",children:"DRAW"}),t.jsx("div",{className:"text-sm",children:"Match Draw"})]}),t.jsxs("button",{onClick:()=>d("cancelled"),className:`p-8 rounded-lg border-2 transition-all ${a==="cancelled"?"bg-gray-600 border-gray-400 scale-105":"bg-gray-700 border-gray-600 hover:border-gray-400"}`,children:[t.jsx("div",{className:"text-3xl font-bold mb-2",children:"CANCEL"}),t.jsx("div",{className:"text-sm",children:"Cancelled Fight"})]})]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("button",{onClick:z,disabled:!a,className:`flex-1 py-4 rounded-lg font-bold text-lg ${a?"bg-green-600 hover:bg-green-700":"bg-gray-600 cursor-not-allowed"}`,children:"âœ… Confirm Declaration"}),t.jsx("button",{onClick:()=>{g(!1),b(null),d(null)},className:"px-6 py-4 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold",children:"Cancel"})]})]})]})}),e[33]=z,e[34]=a,e[35]=r,e[36]=d,e[37]=b,e[38]=g,e[39]=I,e[40]=W):W=e[40];let T;return e[41]!==n||e[42]!==H||e[43]!==c||e[44]!==m||e[45]!==N||e[46]!==h||e[47]!==f||e[48]!==u||e[49]!==O||e[50]!==x?(T=O&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:t.jsxs("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full",children:[t.jsxs("div",{className:"p-6 border-b border-gray-700",children:[t.jsx("h2",{className:"text-2xl font-bold",children:"Create Next Fight"}),t.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Event settings will be auto-populated from the previous fight"})]}),t.jsxs("div",{className:"p-6 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Event Name"}),t.jsx("input",{type:"text",value:n,onChange:l=>N(l.target.value),placeholder:"Enter event name",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-yellow-500"}),n&&c&&n!==c&&t.jsxs("div",{className:"mt-2 p-3 bg-yellow-900/30 border border-yellow-600 rounded-lg",children:[t.jsxs("p",{className:"text-yellow-400 text-sm font-semibold flex items-center gap-2",children:[t.jsx("span",{children:"âš ï¸"}),t.jsx("span",{children:"New Event Detected - Fight will start at #1"})]}),t.jsxs("p",{className:"text-yellow-400/80 text-xs mt-1",children:['Previous event: "',c,'"']})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Meron Fighter"}),t.jsx("input",{type:"text",value:m,onChange:l=>h(l.target.value),placeholder:"Enter Meron fighter name",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-red-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Wala Fighter"}),t.jsx("input",{type:"text",value:x,onChange:l=>u(l.target.value),placeholder:"Enter Wala fighter name",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-blue-500"})]}),t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 text-sm text-gray-300",children:[t.jsx("p",{className:"font-semibold mb-2",children:"ðŸ“‹ Auto-populated settings:"}),t.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[t.jsx("li",{children:"Fight number (auto-incremented)"}),t.jsx("li",{children:"Venue, Event name, Event date"}),t.jsx("li",{children:"Commission percentage, Match type"}),t.jsx("li",{children:"Revolving funds, Teller assignments"}),t.jsx("li",{children:"Special conditions (if any)"})]})]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("button",{onClick:H,disabled:!m||!x,className:`flex-1 py-4 rounded-lg font-bold text-lg ${m&&x?"bg-blue-600 hover:bg-blue-700":"bg-gray-600 cursor-not-allowed"}`,children:"âž• Create Fight"}),t.jsx("button",{onClick:()=>{f(!1),h(""),u("")},className:"px-6 py-4 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold",children:"Cancel"})]})]})]})}),e[41]=n,e[42]=H,e[43]=c,e[44]=m,e[45]=N,e[46]=h,e[47]=f,e[48]=u,e[49]=O,e[50]=x,e[51]=T):T=e[51],t.jsxs(Z,{children:[_,S,F,t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6 mb-6 lg:mb-8",children:[t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 lg:p-6 border border-gray-700",children:[C,t.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-yellow-400",children:P.length}),E]}),t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 lg:p-6 border border-gray-700",children:[D,t.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-green-400",children:J}),A]}),t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 lg:p-6 border border-gray-700",children:[R,t.jsx("div",{className:"text-3xl lg:text-4xl font-bold",children:o.length}),k]})]}),$,L,W,T]})}function ee(s){return t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsxs("span",{className:"font-semibold",children:["Fight #",s.fight_number]}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${s.result==="meron"?"bg-red-600":s.result==="wala"?"bg-blue-600":s.result==="draw"?"bg-green-600":"bg-gray-600"}`,children:s.result?.toUpperCase()||"N/A"})]}),t.jsxs("div",{className:"text-sm text-gray-400",children:[s.meron_fighter," vs ",s.wala_fighter]})]}),s.declared_at&&t.jsx("div",{className:"text-xs text-gray-500",children:new Date(s.declared_at).toLocaleString()})]},s.id)}function te(s){return s.result}function se(s){return s.result}function le(s){return s.declared_by}function re(s){return s.status==="betting_closed"}function ae(){const s=setInterval(ne,3e3);return()=>clearInterval(s)}function ne(){G.reload({only:["fights"]})}export{me as default};
