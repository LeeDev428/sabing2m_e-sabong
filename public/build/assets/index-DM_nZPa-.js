import{c as te,r as w,j as t,a as Q,H as se}from"./app-BYEKLtcG.js";import{T as re}from"./teller-layout-C4bT67oy.js";import"./app-CD36r9P7.js";function ce(s){const e=te.c(63),{tellers:a,transfers:T,currentBalance:i,latestFight:n}=s,[c,W]=w.useState(""),[r,z]=w.useState(""),[d,G]=w.useState(""),[o,J]=w.useState(""),[m,K]=w.useState("");let R;e[0]!==r||e[1]!==i||e[2]!==d||e[3]!==c||e[4]!==a?(R=l=>{if(l.preventDefault(),!c||!r)return;if(parseFloat(r)>i){alert("Insufficient balance!");return}const X=a.find(ee=>ee.id===parseInt(c))?.name||"Unknown",Z=`Confirm Transfer Request

Amount: â‚±${parseFloat(r).toLocaleString()}
To: ${X}
Remarks: ${d||"None"}

This transfer will be pending until approved by Admin or Declarator.

Continue?`;confirm(Z)&&Q.post("/teller/cash-transfer",{to_teller_id:parseInt(c),amount:parseFloat(r),remarks:d},{onSuccess:()=>{W(""),z(""),G("")}})},e[0]=r,e[1]=i,e[2]=d,e[3]=c,e[4]=a,e[5]=R):R=e[5];const M=R;let C;e[6]!==n||e[7]!==o||e[8]!==m?(C=l=>{if(l.preventDefault(),!!o){if(!n){alert("No active fight available!");return}if(parseFloat(o)>n.revolving_funds){alert(`Insufficient revolving funds! Available: â‚±${n.revolving_funds.toLocaleString()}`);return}Q.post("/teller/cash-transfer/request",{amount:parseFloat(o),remarks:m},{onSuccess:()=>{J(""),K(""),alert("Cash request submitted! Waiting for approval.")}})}},e[6]=n,e[7]=o,e[8]=m,e[9]=C):C=e[9];const O=C;let k;e[10]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(se,{title:"Cash Transfer"}),e[10]=k):k=e[10];let q;e[11]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-4 mb-4 border border-gray-700",children:[t.jsx("h1",{className:"text-2xl font-bold text-orange-500",children:"Cash Transfer"}),t.jsx("p",{className:"text-sm text-gray-400",children:"Transfer cash to other tellers"})]}),e[11]=q):q=e[11];let F;e[12]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx("div",{className:"text-sm text-green-300 mb-2",children:"Your Current Balance"}),e[12]=F):F=e[12];let u;e[13]!==i?(u=i.toLocaleString(),e[13]=i,e[14]=u):u=e[14];let x;e[15]!==u?(x=t.jsx("div",{className:"bg-gradient-to-r from-green-900/50 to-emerald-900/50 rounded-lg p-6 mb-4 border border-green-500/30",children:t.jsxs("div",{className:"text-center",children:[F,t.jsxs("div",{className:"text-5xl font-bold text-white",children:["â‚±",u]})]})}),e[15]=u,e[16]=x):x=e[16];let A;e[17]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Transfer Cash"}),e[17]=A):A=e[17];let $;e[18]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Transfer To"}),e[18]=$):$=e[18];let E;e[19]===Symbol.for("react.memo_cache_sentinel")?(E=l=>W(l.target.value),e[19]=E):E=e[19];let I;e[20]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx("option",{value:"",children:"Select Teller"}),e[20]=I):I=e[20];let f;e[21]!==a?(f=a.map(ae),e[21]=a,e[22]=f):f=e[22];let b;e[23]!==c||e[24]!==f?(b=t.jsxs("div",{children:[$,t.jsxs("select",{value:c,onChange:E,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-white text-lg",required:!0,children:[I,f]})]}),e[23]=c,e[24]=f,e[25]=b):b=e[25];let L;e[26]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Amount (â‚±)"}),e[26]=L):L=e[26];let D;e[27]===Symbol.for("react.memo_cache_sentinel")?(D=l=>z(l.target.value),e[27]=D):D=e[27];let g,h;e[28]!==r||e[29]!==i?(g=t.jsx("input",{type:"number",value:r,onChange:D,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-white text-2xl",step:"0.01",min:"0.01",max:i,required:!0}),h=parseFloat(r)>i&&t.jsx("p",{className:"text-red-400 text-sm mt-1",children:"Amount exceeds your balance!"}),e[28]=r,e[29]=i,e[30]=g,e[31]=h):(g=e[30],h=e[31]);let p;e[32]!==g||e[33]!==h?(p=t.jsxs("div",{children:[L,g,h]}),e[32]=g,e[33]=h,e[34]=p):p=e[34];let H;e[35]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Remarks (Optional)"}),e[35]=H):H=e[35];let B;e[36]===Symbol.for("react.memo_cache_sentinel")?(B=l=>G(l.target.value),e[36]=B):B=e[36];let v;e[37]!==d?(v=t.jsxs("div",{children:[H,t.jsx("textarea",{value:d,onChange:B,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-white",rows:3,placeholder:"e.g., Cash needed for betting"})]}),e[37]=d,e[38]=v):v=e[38];const P=!c||!r||parseFloat(r)>i,V=r||"0";let y;e[39]!==P||e[40]!==V?(y=t.jsxs("button",{type:"submit",disabled:P,className:"w-full px-6 py-4 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed rounded-lg font-bold text-xl",children:["Transfer â‚±",V]}),e[39]=P,e[40]=V,e[41]=y):y=e[41];let j;e[42]!==M||e[43]!==b||e[44]!==p||e[45]!==v||e[46]!==y?(j=t.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-6 mb-4 border border-gray-700",children:[A,t.jsxs("form",{onSubmit:M,className:"space-y-4",children:[b,p,v,y]})]}),e[42]=M,e[43]=b,e[44]=p,e[45]=v,e[46]=y,e[47]=j):j=e[47];let N;e[48]!==O||e[49]!==n||e[50]!==o||e[51]!==m?(N=n&&t.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg p-6 mb-4 border border-purple-500/30",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-xl font-bold text-purple-400",children:"Request Cash from Revolving Fund"}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-xs text-gray-400",children:"Available Funds"}),t.jsxs("div",{className:"text-lg font-bold text-purple-300",children:["â‚±",n.revolving_funds.toLocaleString()]})]})]}),t.jsxs("form",{onSubmit:O,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Request Amount (â‚±)"}),t.jsx("input",{type:"number",value:o,onChange:l=>J(l.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white text-2xl",step:"0.01",min:"0.01",max:n.revolving_funds,required:!0}),parseFloat(o)>n.revolving_funds&&t.jsx("p",{className:"text-red-400 text-sm mt-1",children:"Amount exceeds available revolving funds!"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Remarks / Reason for Request"}),t.jsx("textarea",{value:m,onChange:l=>K(l.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white",rows:3,placeholder:"e.g., Cash needed for betting operations",required:!0})]}),t.jsxs("button",{type:"submit",disabled:!o||parseFloat(o)>n.revolving_funds,className:"w-full px-6 py-4 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 disabled:cursor-not-allowed rounded-lg font-bold text-xl",children:["Request â‚±",o||"0"]})]})]}),e[48]=O,e[49]=n,e[50]=o,e[51]=m,e[52]=N):N=e[52];let U;e[53]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx("div",{className:"p-4 border-b border-gray-700",children:t.jsx("h2",{className:"text-xl font-bold text-orange-500",children:"Your Transfer History"})}),e[53]=U):U=e[53];let _;e[54]!==T?(_=T.length===0?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:"ðŸ’¸"}),t.jsx("p",{className:"text-gray-400",children:"No transfers yet"})]}):T.map(le),e[54]=T,e[55]=_):_=e[55];let S;e[56]!==_?(S=t.jsxs("div",{className:"bg-[#1a1a1a] rounded-lg overflow-hidden border border-gray-700",children:[U,t.jsx("div",{className:"divide-y divide-gray-700",children:_})]}),e[56]=_,e[57]=S):S=e[57];let Y;return e[58]!==j||e[59]!==N||e[60]!==S||e[61]!==x?(Y=t.jsxs(re,{currentPage:"cash-transfer",children:[k,t.jsxs("div",{className:"p-4 max-w-2xl mx-auto",children:[q,x,j,N,S]})]}),e[58]=j,e[59]=N,e[60]=S,e[61]=x,e[62]=Y):Y=e[62],Y}function le(s){const e=window.authUserId,a=s.from_teller.id===e;return t.jsx("div",{className:"p-4 hover:bg-gray-800/50 transition-colors",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${a?"bg-red-600":"bg-green-600"}`,children:a?"SENT":"RECEIVED"}),t.jsx("span",{className:"text-white font-semibold",children:a?`To: ${s.to_teller.name}`:`From: ${s.from_teller.name}`})]}),t.jsx("div",{className:"text-sm text-gray-400 mt-1",children:new Date(s.created_at).toLocaleString()}),s.remarks&&t.jsx("div",{className:"text-sm text-gray-400 mt-1",children:s.remarks})]}),t.jsxs("div",{className:`text-2xl font-bold ${a?"text-red-400":"text-green-400"}`,children:[a?"-":"+","â‚±",s.amount.toLocaleString()]})]})},s.id)}function ae(s){return t.jsxs("option",{value:s.id,children:[s.name," (",s.email,")"]},s.id)}export{ce as default};
