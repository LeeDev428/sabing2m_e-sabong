import{c as ue,r as xe,j as t,a as oe,H as je}from"./app-Bi5fZ4Wp.js";import{A as Ne}from"./admin-layout-DMJfkSfN.js";import"./app-DEfY5SgQ.js";function $e(l){const e=ue.c(93),{pending:a,approved:n,declined:i,allTransfers:c,tellers:o,events:R,filters:H}=l;let L;e[0]!==R?(L=R===void 0?[]:R,e[0]=R,e[1]=L):L=e[1];const re=L;let M;e[2]!==H?(M=H===void 0?{}:H,e[2]=H,e[3]=M):M=e[3];const he=M,[r,B]=xe.useState("pending"),[d,ge]=xe.useState(he.event||"");let I;e[4]===Symbol.for("react.memo_cache_sentinel")?(I=s=>{ge(s),oe.get("/admin/cash-transfer",{event:s||void 0},{preserveState:!0})},e[4]=I):I=e[4];const de=I,pe=Te,fe=ke,be=Ae,ve=Ce;let U;e[5]===Symbol.for("react.memo_cache_sentinel")?(U=(s,me)=>{const ye=me===void 0?!1:me;return t.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 hover:bg-gray-650 transition-colors",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("span",{className:"text-xl font-bold text-green-400",children:be(s.amount)}),t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${s.status==="pending"?"bg-yellow-600":s.status==="approved"?"bg-green-600":s.status==="declined"?"bg-red-600":"bg-gray-600"}`,children:s.status.toUpperCase()})]}),t.jsxs("div",{className:"text-sm space-y-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-400",children:"From:"}),t.jsx("span",{className:"font-medium",children:s.from_teller.name}),t.jsxs("span",{className:"text-xs text-gray-500",children:["(",s.from_teller.role,")"]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-400",children:"To:"}),t.jsx("span",{className:"font-medium",children:s.to_teller.name}),t.jsxs("span",{className:"text-xs text-gray-500",children:["(",s.to_teller.role,")"]})]}),s.remarks&&t.jsxs("div",{className:"flex items-start gap-2 mt-2",children:[t.jsx("span",{className:"text-gray-400",children:"Note:"}),t.jsx("span",{className:"text-gray-300 italic",children:s.remarks})]})]})]}),ye&&t.jsxs("div",{className:"flex gap-2 ml-4",children:[t.jsx("button",{onClick:()=>pe(s.id),className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg font-semibold text-sm",children:"âœ… Approve"}),t.jsx("button",{onClick:()=>fe(s.id),className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg font-semibold text-sm",children:"âŒ Reject"})]})]}),t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 pt-2 border-t border-gray-600",children:[t.jsxs("span",{children:["ðŸ“… ",ve(s.created_at)]}),s.approved_by&&t.jsxs("span",{children:["âœ“ Approved by: ",s.approved_by.name]})]})]},s.id)},e[5]=U):U=e[5];const q=U;let z;e[6]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(je,{title:"Cash Transfer Monitoring - Admin"}),e[6]=z):z=e[6];let G;e[7]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl lg:text-3xl font-bold",children:"Cash Transfer Monitoring"}),t.jsx("p",{className:"text-sm lg:text-base text-gray-400",children:"Monitor, approve, and track cash transfers"})]}),e[7]=G):G=e[7];let J;e[8]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx("label",{className:"text-sm font-medium text-gray-300 shrink-0",children:"Filter by Event:"}),e[8]=J):J=e[8];let K;e[9]===Symbol.for("react.memo_cache_sentinel")?(K=s=>de(s.target.value),e[9]=K):K=e[9];let O;e[10]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx("option",{value:"",children:"All Events"}),e[10]=O):O=e[10];let m;e[11]!==re?(m=re.map(we),e[11]=re,e[12]=m):m=e[12];let x;e[13]!==d||e[14]!==m?(x=t.jsxs("select",{value:d,onChange:K,className:"flex-1 px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-white",children:[O,m]}),e[13]=d,e[14]=m,e[15]=x):x=e[15];let h;e[16]!==d?(h=d&&t.jsx("button",{onClick:()=>de(""),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm",children:"Clear Filter"}),e[16]=d,e[17]=h):h=e[17];let g;e[18]!==x||e[19]!==h?(g=t.jsx("div",{className:"mb-6 bg-gray-800 rounded-lg p-4",children:t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[J,x,h]})}),e[18]=x,e[19]=h,e[20]=g):g=e[20];let Q;e[21]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"ðŸ’° Real-Time Teller Balances"}),e[21]=Q):Q=e[21];let p;e[22]!==o?(p=o.map(Se),e[22]=o,e[23]=p):p=e[23];let f;e[24]!==p?(f=t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:p}),e[24]=p,e[25]=f):f=e[25];let V;e[26]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx("div",{className:"text-blue-100 text-sm",children:"Total Cash in System"}),e[26]=V):V=e[26];let b;e[27]!==o?(b=o.reduce(_e,0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),e[27]=o,e[28]=b):b=e[28];let v;e[29]!==b?(v=t.jsxs("div",{className:"mt-4 pt-4 border-t border-blue-400",children:[V,t.jsxs("div",{className:"text-3xl font-bold text-white",children:["â‚±",b]})]}),e[29]=b,e[30]=v):v=e[30];let y;e[31]!==f||e[32]!==v?(y=t.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 rounded-lg p-6 mb-6",children:[Q,f,v]}),e[31]=f,e[32]=v,e[33]=y):y=e[33];let W;e[34]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Pending Approval"}),e[34]=W):W=e[34];let u;e[35]!==a.length?(u=t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[W,t.jsx("div",{className:"text-3xl font-bold text-yellow-400",children:a.length})]}),e[35]=a.length,e[36]=u):u=e[36];let X;e[37]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Approved"}),e[37]=X):X=e[37];let j;e[38]!==n.length?(j=t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[X,t.jsx("div",{className:"text-3xl font-bold text-green-400",children:n.length})]}),e[38]=n.length,e[39]=j):j=e[39];let Y;e[40]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Declined"}),e[40]=Y):Y=e[40];let N;e[41]!==i.length?(N=t.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[Y,t.jsx("div",{className:"text-3xl font-bold text-red-400",children:i.length})]}),e[41]=i.length,e[42]=N):N=e[42];let _;e[43]!==u||e[44]!==j||e[45]!==N?(_=t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[u,j,N]}),e[43]=u,e[44]=j,e[45]=N,e[46]=_):_=e[46];let Z;e[47]===Symbol.for("react.memo_cache_sentinel")?(Z=()=>B("pending"),e[47]=Z):Z=e[47];const ae=`flex-1 px-6 py-4 font-semibold transition-colors ${r==="pending"?"bg-yellow-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-750"}`;let S;e[48]!==a.length||e[49]!==ae?(S=t.jsxs("button",{onClick:Z,className:ae,children:["â³ Pending (",a.length,")"]}),e[48]=a.length,e[49]=ae,e[50]=S):S=e[50];let ee;e[51]===Symbol.for("react.memo_cache_sentinel")?(ee=()=>B("approved"),e[51]=ee):ee=e[51];const ne=`flex-1 px-6 py-4 font-semibold transition-colors ${r==="approved"?"bg-green-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-750"}`;let w;e[52]!==n.length||e[53]!==ne?(w=t.jsxs("button",{onClick:ee,className:ne,children:["âœ… Approved (",n.length,")"]}),e[52]=n.length,e[53]=ne,e[54]=w):w=e[54];let te;e[55]===Symbol.for("react.memo_cache_sentinel")?(te=()=>B("declined"),e[55]=te):te=e[55];const ie=`flex-1 px-6 py-4 font-semibold transition-colors ${r==="declined"?"bg-red-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-750"}`;let C;e[56]!==i.length||e[57]!==ie?(C=t.jsxs("button",{onClick:te,className:ie,children:["âŒ Declined (",i.length,")"]}),e[56]=i.length,e[57]=ie,e[58]=C):C=e[58];let se;e[59]===Symbol.for("react.memo_cache_sentinel")?(se=()=>B("all"),e[59]=se):se=e[59];const ce=`flex-1 px-6 py-4 font-semibold transition-colors ${r==="all"?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-750"}`;let A;e[60]!==c.length||e[61]!==ce?(A=t.jsxs("button",{onClick:se,className:ce,children:["ðŸ“‹ All Logs (",c.length,")"]}),e[60]=c.length,e[61]=ce,e[62]=A):A=e[62];let k;e[63]!==S||e[64]!==w||e[65]!==C||e[66]!==A?(k=t.jsxs("div",{className:"flex border-b border-gray-700",children:[S,w,C,A]}),e[63]=S,e[64]=w,e[65]=C,e[66]=A,e[67]=k):k=e[67];let T;e[68]!==r||e[69]!==a?(T=r==="pending"&&t.jsx("div",{children:a.length>0?t.jsx("div",{className:"space-y-4",children:a.map(s=>q(s,!0))}):t.jsx("div",{className:"text-center py-12 text-gray-400",children:"No pending cash transfers"})}),e[68]=r,e[69]=a,e[70]=T):T=e[70];let F;e[71]!==r||e[72]!==n?(F=r==="approved"&&t.jsx("div",{children:n.length>0?t.jsx("div",{className:"space-y-4",children:n.map(s=>q(s,!1))}):t.jsx("div",{className:"text-center py-12 text-gray-400",children:"No approved transfers yet"})}),e[71]=r,e[72]=n,e[73]=F):F=e[73];let D;e[74]!==r||e[75]!==i?(D=r==="declined"&&t.jsx("div",{children:i.length>0?t.jsx("div",{className:"space-y-4",children:i.map(s=>q(s,!1))}):t.jsx("div",{className:"text-center py-12 text-gray-400",children:"No declined transfers"})}),e[74]=r,e[75]=i,e[76]=D):D=e[76];let E;e[77]!==r||e[78]!==c?(E=r==="all"&&t.jsx("div",{children:c.length>0?t.jsx("div",{className:"space-y-4",children:c.map(s=>q(s,!1))}):t.jsx("div",{className:"text-center py-12 text-gray-400",children:"No transfer logs available"})}),e[77]=r,e[78]=c,e[79]=E):E=e[79];let $;e[80]!==T||e[81]!==F||e[82]!==D||e[83]!==E?($=t.jsxs("div",{className:"p-6",children:[T,F,D,E]}),e[80]=T,e[81]=F,e[82]=D,e[83]=E,e[84]=$):$=e[84];let P;e[85]!==k||e[86]!==$?(P=t.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700",children:[k,$]}),e[85]=k,e[86]=$,e[87]=P):P=e[87];let le;return e[88]!==g||e[89]!==y||e[90]!==_||e[91]!==P?(le=t.jsxs(Ne,{children:[z,G,g,y,_,P]}),e[88]=g,e[89]=y,e[90]=_,e[91]=P,e[92]=le):le=e[92],le}function _e(l,e){return l+Number(e.current_balance||0)}function Se(l){return t.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[t.jsx("div",{className:"text-sm text-blue-100",children:l.name}),t.jsxs("div",{className:"text-2xl font-bold text-white mt-1",children:["â‚±",Number(l.current_balance).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),t.jsx("div",{className:"text-xs text-blue-200 mt-1",children:l.email})]},l.id)}function we(l){return t.jsx("option",{value:l,children:l},l)}function Ce(l){return new Date(l).toLocaleString("en-PH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Ae(l){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(l)}function ke(l){confirm("Reject this cash transfer? The balances will stay the same.")&&oe.delete(`/admin/cash-transfer/${l}/reject`)}function Te(l){confirm("Approve this cash transfer?")&&oe.post(`/admin/cash-transfer/${l}/approve`)}export{$e as default};
