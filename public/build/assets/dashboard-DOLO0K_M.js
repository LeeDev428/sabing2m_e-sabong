import{c as z,r as x,j as e,a as T,H}from"./app-D98qbBgN.js";import{D as U}from"./declarator-layout-pqMKjfMu.js";import"./app-C1p7HdE6.js";function le(t){const s=z.c(36),{fights:$}=t,m=$===void 0?[]:$,[E,d]=x.useState(!1),[A,R]=x.useState(!1),[l,i]=x.useState(null),[r,a]=x.useState(null);let g;s[0]===Symbol.for("react.memo_cache_sentinel")?(g=[],s[0]=g):g=s[0],x.useEffect(Y,g);const k=m.filter(X),I=m.filter(Q).length;let b;s[1]!==r||s[2]!==l||s[3]!==a||s[4]!==i||s[5]!==d?(b=()=>{!l||!r||T.post("/declarator/results",{fight_id:l.id,result:r},{onSuccess:()=>{d(!1),i(null),a(null)}})},s[1]=r,s[2]=l,s[3]=a,s[4]=i,s[5]=d,s[6]=b):b=s[6];const M=b;let h,u;s[7]===Symbol.for("react.memo_cache_sentinel")?(h=e.jsx(H,{title:"Declarator Dashboard"}),u=e.jsx("br",{}),s[7]=h,s[8]=u):(h=s[7],u=s[8]);let f;s[9]===Symbol.for("react.memo_cache_sentinel")?(f=e.jsx("div",{className:"mb-6 lg:mb-8 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold",children:"Declarator Dashboard"}),e.jsx("p",{className:"text-sm lg:text-base text-gray-400",children:"Declare fight results and manage outcomes"})]})}),s[9]=f):f=s[9];let p;s[10]===Symbol.for("react.memo_cache_sentinel")?(p=e.jsx("div",{className:"text-xs lg:text-sm text-gray-400 mb-2",children:"Pending Results"}),s[10]=p):p=s[10];let y;s[11]===Symbol.for("react.memo_cache_sentinel")?(y=e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Fights awaiting declaration"}),s[11]=y):y=s[11];let N;s[12]===Symbol.for("react.memo_cache_sentinel")?(N=e.jsx("div",{className:"text-xs lg:text-sm text-gray-400 mb-2",children:"Declared Today"}),s[12]=N):N=s[12];let j;s[13]===Symbol.for("react.memo_cache_sentinel")?(j=e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Results declared today"}),s[13]=j):j=s[13];let v;s[14]===Symbol.for("react.memo_cache_sentinel")?(v=e.jsx("div",{className:"text-xs lg:text-sm text-gray-400 mb-2",children:"Total Fights"}),s[14]=v):v=s[14];let _;s[15]===Symbol.for("react.memo_cache_sentinel")?(_=e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"All fight events"}),s[15]=_):_=s[15];let w;s[16]===Symbol.for("react.memo_cache_sentinel")?(w=e.jsxs("div",{className:"p-4 lg:p-6 border-b border-gray-700",children:[e.jsx("h2",{className:"text-lg lg:text-xl font-bold",children:"Pending Declarations"}),e.jsx("p",{className:"text-xs lg:text-sm text-gray-400",children:"Fights with closed betting awaiting result declaration"})]}),s[16]=w):w=s[16];const L=k.length>0?e.jsx("div",{className:"space-y-4",children:k.map(n=>e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 flex items-center justify-between hover:bg-gray-600 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"font-bold text-lg",children:["Fight #",n.fight_number]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-yellow-600",children:"â±ï¸ AWAITING RESULT"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm mb-2",children:[e.jsxs("span",{className:"text-red-400 font-medium",children:["MERON: ",n.meron_fighter," (",n.meron_odds||"N/A",")"]}),e.jsx("span",{className:"text-gray-500",children:"vs"}),e.jsxs("span",{className:"text-blue-400 font-medium",children:["WALA: ",n.wala_fighter," (",n.wala_odds||"N/A",")"]})]}),n.betting_closed_at&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Betting closed: ",new Date(n.betting_closed_at).toLocaleString()]})]}),e.jsx("button",{onClick:()=>{i(n),d(!0)},className:"px-6 py-3 bg-green-600 hover:bg-green-700 rounded-lg font-semibold",children:"ðŸ† Declare Result"})]},n.id))}):e.jsx("div",{className:"text-center py-12 text-gray-400",children:"No pending declarations. All fights have been processed."});let F;s[17]!==L?(F=e.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700",children:[w,e.jsx("div",{className:"p-4 lg:p-6",children:L})]}),s[17]=L,s[18]=F):F=s[18];const O="mt-8 bg-gray-800 rounded-lg border border-gray-700";let c;s[19]===Symbol.for("react.memo_cache_sentinel")?(c=e.jsxs("div",{className:"p-6 border-b border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Recent Declarations"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Latest declared fight results"})]}),s[19]=c):c=s[19];const P="p-6",W=m.filter(K).length>0?e.jsx("div",{className:"space-y-3",children:m.filter(J).slice(0,5).map(q)}):e.jsx("div",{className:"text-center py-8 text-gray-400",children:"No declared results yet"});let o;s[20]!==W?(o=e.jsx("div",{className:P,children:W}),s[20]=W,s[21]=o):o=s[21];let C;s[22]!==c||s[23]!==o?(C=e.jsxs("div",{className:O,children:[c,o]}),s[22]=c,s[23]=o,s[24]=C):C=s[24];let S;s[25]!==M||s[26]!==r||s[27]!==l||s[28]!==a||s[29]!==i||s[30]!==d||s[31]!==E?(S=E&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full",children:[e.jsxs("div",{className:"p-6 border-b border-gray-700",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Declare Fight Result"}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Fight #",l.fight_number,": ",l.meron_fighter," vs ",l.wala_fighter]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>a("meron"),className:`p-8 rounded-lg border-2 transition-all ${r==="meron"?"bg-red-600 border-red-400 scale-105":"bg-gray-700 border-gray-600 hover:border-red-400"}`,children:[e.jsx("div",{className:"text-3xl font-bold mb-2",children:"MERON"}),e.jsx("div",{className:"text-sm",children:l.meron_fighter}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Odds: ",l.meron_odds||"N/A"]})]}),e.jsxs("button",{onClick:()=>a("wala"),className:`p-8 rounded-lg border-2 transition-all ${r==="wala"?"bg-blue-600 border-blue-400 scale-105":"bg-gray-700 border-gray-600 hover:border-blue-400"}`,children:[e.jsx("div",{className:"text-3xl font-bold mb-2",children:"WALA"}),e.jsx("div",{className:"text-sm",children:l.wala_fighter}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Odds: ",l.wala_odds||"N/A"]})]}),e.jsxs("button",{onClick:()=>a("draw"),className:`p-8 rounded-lg border-2 transition-all ${r==="draw"?"bg-green-600 border-green-400 scale-105":"bg-gray-700 border-gray-600 hover:border-green-400"}`,children:[e.jsx("div",{className:"text-3xl font-bold mb-2",children:"DRAW"}),e.jsx("div",{className:"text-sm",children:"Match Draw"})]}),e.jsxs("button",{onClick:()=>a("cancelled"),className:`p-8 rounded-lg border-2 transition-all ${r==="cancelled"?"bg-gray-600 border-gray-400 scale-105":"bg-gray-700 border-gray-600 hover:border-gray-400"}`,children:[e.jsx("div",{className:"text-3xl font-bold mb-2",children:"CANCEL"}),e.jsx("div",{className:"text-sm",children:"Cancelled Fight"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:M,disabled:!r,className:`flex-1 py-4 rounded-lg font-bold text-lg ${r?"bg-green-600 hover:bg-green-700":"bg-gray-600 cursor-not-allowed"}`,children:"âœ… Confirm Declaration"}),e.jsx("button",{onClick:()=>{d(!1),i(null),a(null)},className:"px-6 py-4 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold",children:"Cancel"})]})]})]})}),s[25]=M,s[26]=r,s[27]=l,s[28]=a,s[29]=i,s[30]=d,s[31]=E,s[32]=S):S=s[32];let D;return s[33]!==R||s[34]!==A?(D=A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full",children:[e.jsxs("div",{className:"p-6 border-b border-gray-700",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Create Next Fight"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Event settings will be auto-populated from the previous fight"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Event Name"}),e.jsx("input",{type:"text",value:eventName,onChange:V,placeholder:"Enter event name",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-yellow-500"}),eventName&&lastEventName&&eventName!==lastEventName&&e.jsxs("div",{className:"mt-2 p-3 bg-yellow-900/30 border border-yellow-600 rounded-lg",children:[e.jsxs("p",{className:"text-yellow-400 text-sm font-semibold flex items-center gap-2",children:[e.jsx("span",{children:"âš ï¸"}),e.jsx("span",{children:"New Event Detected - Fight will start at #1"})]}),e.jsxs("p",{className:"text-yellow-400/80 text-xs mt-1",children:['Previous event: "',lastEventName,'"']})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Meron Fighter"}),e.jsx("input",{type:"text",value:meronFighter,onChange:G,placeholder:"Enter Meron fighter name",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Wala Fighter"}),e.jsx("input",{type:"text",value:walaFighter,onChange:B,placeholder:"Enter Wala fighter name",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 text-sm text-gray-300",children:[e.jsx("p",{className:"font-semibold mb-2",children:"ðŸ“‹ Auto-populated settings:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Fight number (auto-incremented)"}),e.jsx("li",{children:"Venue, Event name, Event date"}),e.jsx("li",{children:"Commission percentage, Match type"}),e.jsx("li",{children:"Revolving funds, Teller assignments"}),e.jsx("li",{children:"Special conditions (if any)"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:handleCreateNextFight,disabled:!meronFighter||!walaFighter,className:`flex-1 py-4 rounded-lg font-bold text-lg ${meronFighter&&walaFighter?"bg-blue-600 hover:bg-blue-700":"bg-gray-600 cursor-not-allowed"}`,children:"âž• Create Fight"}),e.jsx("button",{onClick:()=>{R(!1),setMeronFighter(""),setWalaFighter("")},className:"px-6 py-4 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold",children:"Cancel"})]})]})]})}),s[33]=R,s[34]=A,s[35]=D):D=s[35],e.jsxs(U,{children:[h,u,f,e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6 mb-6 lg:mb-8",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 lg:p-6 border border-gray-700",children:[p,e.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-yellow-400",children:k.length}),y]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 lg:p-6 border border-gray-700",children:[N,e.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-green-400",children:I}),j]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 lg:p-6 border border-gray-700",children:[v,e.jsx("div",{className:"text-3xl lg:text-4xl font-bold",children:m.length}),_]})]}),F,C,S,D]})}function B(t){return setWalaFighter(t.target.value)}function G(t){return setMeronFighter(t.target.value)}function V(t){return setEventName(t.target.value)}function q(t){return e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"font-semibold",children:["Fight #",t.fight_number]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${t.result==="meron"?"bg-red-600":t.result==="wala"?"bg-blue-600":t.result==="draw"?"bg-green-600":"bg-gray-600"}`,children:t.result?.toUpperCase()||"N/A"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[t.meron_fighter," vs ",t.wala_fighter]})]}),t.declared_at&&e.jsx("div",{className:"text-xs text-gray-500",children:new Date(t.declared_at).toLocaleString()})]},t.id)}function J(t){return t.result}function K(t){return t.result}function Q(t){return t.declared_by}function X(t){return t.status==="betting_closed"}function Y(){const t=setInterval(Z,3e3);return()=>clearInterval(t)}function Z(){T.reload({only:["fights"]})}export{le as default};
