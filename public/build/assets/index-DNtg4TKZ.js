import{c as oe,r as R,j as t,a as re,H as ie}from"./app-BT34oJB2.js";import{T as ce}from"./teller-layout-CUf_XwPQ.js";import"./app-Dz7YXrlQ.js";function pe(s){const e=oe.c(70),{tellers:l,transfers:k,currentBalance:i,latestFight:n}=s,[c,Y]=R.useState(""),[r,Z]=R.useState(""),[d,ee]=R.useState(""),[o,te]=R.useState(""),[m,se]=R.useState("");let T;e[0]!==r||e[1]!==i||e[2]!==d||e[3]!==c||e[4]!==l?(T=a=>{if(a.preventDefault(),!c||!r)return;if(parseFloat(r)>i){alert("Insufficient balance!");return}const ae=l.find(ne=>ne.id===parseInt(c))?.name||"Unknown",le=`Confirm Transfer Request

Amount: â‚±${parseFloat(r).toLocaleString()}
To: ${ae}
Remarks: ${d||"None"}

This transfer will be pending until approved by Admin or Declarator.

Continue?`;confirm(le)&&re.post("/teller/cash-transfer",{to_teller_id:parseInt(c),amount:parseFloat(r),remarks:d},{onSuccess:()=>{Y(""),Z(""),ee("")}})},e[0]=r,e[1]=i,e[2]=d,e[3]=c,e[4]=l,e[5]=T):T=e[5];const J=T;let q;e[6]!==n||e[7]!==o||e[8]!==m?(q=a=>{if(a.preventDefault(),!!o){if(!n){alert("No active fight available!");return}if(parseFloat(o)>n.revolving_funds){alert(`Insufficient revolving funds! Available: â‚±${n.revolving_funds.toLocaleString()}`);return}re.post("/teller/cash-transfer/request",{amount:parseFloat(o),remarks:m},{onSuccess:()=>{te(""),se(""),alert("Cash request submitted! Waiting for approval.")}})}},e[6]=n,e[7]=o,e[8]=m,e[9]=q):q=e[9];const K=q;let C;e[10]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx(ie,{title:"Cash Transfer"}),e[10]=C):C=e[10];let F;e[11]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx("div",{className:"text-xs text-gray-500 uppercase tracking-widest mb-1",children:"Money On Hand"}),e[11]=F):F=e[11];let u;e[12]!==i?(u=i.toLocaleString("en-PH",{minimumFractionDigits:2}),e[12]=i,e[13]=u):u=e[13];let x;e[14]!==u?(x=t.jsxs("div",{className:"px-4 pt-4 pb-3 bg-[#1a1a1a] border-b border-gray-800",children:[F,t.jsxs("div",{className:"text-3xl font-black tabular-nums text-white",children:["â‚±",u]})]}),e[14]=u,e[15]=x):x=e[15];let A;e[16]===Symbol.for("react.memo_cache_sentinel")?(A={borderRadius:"8px"},e[16]=A):A=e[16];let $;e[17]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx("div",{className:"px-4 py-3 border-b border-gray-800 bg-[#222222]",children:t.jsx("h2",{className:"text-sm font-bold tracking-widest text-gray-300 uppercase",children:"Transfer Cash"})}),e[17]=$):$=e[17];let E;e[18]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-1.5",children:"Transfer To"}),e[18]=E):E=e[18];let I;e[19]===Symbol.for("react.memo_cache_sentinel")?(I=a=>Y(a.target.value),e[19]=I):I=e[19];let L;e[20]===Symbol.for("react.memo_cache_sentinel")?(L={borderRadius:"6px"},e[20]=L):L=e[20];let D;e[21]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx("option",{value:"",children:"Select Teller"}),e[21]=D):D=e[21];let b;e[22]!==l?(b=l.map(me),e[22]=l,e[23]=b):b=e[23];let p;e[24]!==c||e[25]!==b?(p=t.jsxs("div",{children:[E,t.jsxs("select",{value:c,onChange:I,className:"w-full px-3 py-3 bg-[#2a2a2a] border border-gray-700 text-white text-sm focus:outline-none focus:border-blue-500",style:L,required:!0,children:[D,b]})]}),e[24]=c,e[25]=b,e[26]=p):p=e[26];let H;e[27]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-1.5",children:"Amount (â‚±)"}),e[27]=H):H=e[27];let M;e[28]===Symbol.for("react.memo_cache_sentinel")?(M=a=>Z(a.target.value),e[28]=M):M=e[28];let O;e[29]===Symbol.for("react.memo_cache_sentinel")?(O={borderRadius:"6px"},e[29]=O):O=e[29];let f,h;e[30]!==r||e[31]!==i?(f=t.jsx("input",{type:"number",value:r,onChange:M,className:"w-full px-3 py-3 bg-[#2a2a2a] border border-gray-700 text-white text-xl tabular-nums focus:outline-none focus:border-blue-500",style:O,step:"0.01",min:"0.01",max:i,required:!0}),h=parseFloat(r)>i&&t.jsx("p",{className:"text-red-400 text-xs mt-1",children:"Amount exceeds your balance!"}),e[30]=r,e[31]=i,e[32]=f,e[33]=h):(f=e[32],h=e[33]);let g;e[34]!==f||e[35]!==h?(g=t.jsxs("div",{children:[H,f,h]}),e[34]=f,e[35]=h,e[36]=g):g=e[36];let P;e[37]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-1.5",children:"Remarks (Optional)"}),e[37]=P):P=e[37];let U;e[38]===Symbol.for("react.memo_cache_sentinel")?(U=a=>ee(a.target.value),e[38]=U):U=e[38];let B;e[39]===Symbol.for("react.memo_cache_sentinel")?(B={borderRadius:"6px"},e[39]=B):B=e[39];let y;e[40]!==d?(y=t.jsxs("div",{children:[P,t.jsx("textarea",{value:d,onChange:U,className:"w-full px-3 py-2.5 bg-[#2a2a2a] border border-gray-700 text-white text-sm focus:outline-none focus:border-blue-500",style:B,rows:2,placeholder:"e.g., Cash needed for betting"})]}),e[40]=d,e[41]=y):y=e[41];const Q=!c||!r||parseFloat(r)>i;let V;e[42]===Symbol.for("react.memo_cache_sentinel")?(V={borderRadius:"6px"},e[42]=V):V=e[42];const X=r||"0";let v;e[43]!==Q||e[44]!==X?(v=t.jsxs("button",{type:"submit",disabled:Q,className:"w-full py-3.5 bg-[#1565c0] hover:bg-[#1976d2] disabled:bg-gray-700 disabled:text-gray-500 disabled:cursor-not-allowed font-bold text-base transition-colors",style:V,children:["Transfer â‚±",X]}),e[43]=Q,e[44]=X,e[45]=v):v=e[45];let j;e[46]!==J||e[47]!==p||e[48]!==g||e[49]!==y||e[50]!==v?(j=t.jsxs("div",{className:"bg-[#1a1a1a] border border-gray-800 overflow-hidden",style:A,children:[$,t.jsxs("form",{onSubmit:J,className:"p-4 space-y-3",children:[p,g,y,v]})]}),e[46]=J,e[47]=p,e[48]=g,e[49]=y,e[50]=v,e[51]=j):j=e[51];let _;e[52]!==K||e[53]!==n||e[54]!==o||e[55]!==m?(_=n&&t.jsxs("div",{className:"bg-[#1a1a1a] border border-purple-900/50 overflow-hidden",style:{borderRadius:"8px"},children:[t.jsxs("div",{className:"px-4 py-3 border-b border-purple-900/50 bg-[#1e1528] flex items-center justify-between",children:[t.jsx("h2",{className:"text-sm font-bold tracking-widest text-purple-300 uppercase",children:"Request from Revolving Fund"}),t.jsxs("span",{className:"text-purple-400 text-sm font-bold tabular-nums",children:["â‚±",n.revolving_funds.toLocaleString()]})]}),t.jsxs("form",{onSubmit:K,className:"p-4 space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-1.5",children:"Request Amount (â‚±)"}),t.jsx("input",{type:"number",value:o,onChange:a=>te(a.target.value),className:"w-full px-3 py-3 bg-[#2a2a2a] border border-gray-700 text-white text-xl tabular-nums focus:outline-none focus:border-purple-500",style:{borderRadius:"6px"},step:"0.01",min:"0.01",max:n.revolving_funds,required:!0}),parseFloat(o)>n.revolving_funds&&t.jsx("p",{className:"text-red-400 text-xs mt-1",children:"Amount exceeds available revolving funds!"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 uppercase tracking-wider mb-1.5",children:"Remarks / Reason"}),t.jsx("textarea",{value:m,onChange:a=>se(a.target.value),className:"w-full px-3 py-2.5 bg-[#2a2a2a] border border-gray-700 text-white text-sm focus:outline-none focus:border-purple-500",style:{borderRadius:"6px"},rows:2,placeholder:"e.g., Cash needed for betting operations",required:!0})]}),t.jsxs("button",{type:"submit",disabled:!o||parseFloat(o)>n.revolving_funds,className:"w-full py-3.5 bg-purple-700 hover:bg-purple-600 disabled:bg-gray-700 disabled:text-gray-500 disabled:cursor-not-allowed font-bold text-base transition-colors",style:{borderRadius:"6px"},children:["Request â‚±",o||"0"]})]})]}),e[52]=K,e[53]=n,e[54]=o,e[55]=m,e[56]=_):_=e[56];let W;e[57]===Symbol.for("react.memo_cache_sentinel")?(W={borderRadius:"8px"},e[57]=W):W=e[57];let z;e[58]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx("div",{className:"px-4 py-3 border-b border-gray-800 bg-[#222222]",children:t.jsx("h2",{className:"text-sm font-bold tracking-widest text-gray-300 uppercase",children:"Transfer History"})}),e[58]=z):z=e[58];let N;e[59]!==k?(N=k.length===0?t.jsxs("div",{className:"p-8 text-center",children:[t.jsx("div",{className:"text-5xl mb-3",children:"ðŸ’¸"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"No transfers yet"})]}):k.map(de),e[59]=k,e[60]=N):N=e[60];let w;e[61]!==N?(w=t.jsxs("div",{className:"bg-[#1a1a1a] border border-gray-800 overflow-hidden",style:W,children:[z,t.jsx("div",{className:"divide-y divide-gray-800/70",children:N})]}),e[61]=N,e[62]=w):w=e[62];let S;e[63]!==j||e[64]!==_||e[65]!==w?(S=t.jsxs("div",{className:"px-4 pt-4 space-y-4",children:[j,_,w]}),e[63]=j,e[64]=_,e[65]=w,e[66]=S):S=e[66];let G;return e[67]!==S||e[68]!==x?(G=t.jsxs(ce,{currentPage:"cash",children:[C,t.jsxs("div",{className:"min-h-screen bg-[#111111] text-white pb-24",children:[x,S]})]}),e[67]=S,e[68]=x,e[69]=G):G=e[69],G}function de(s){const e=window.authUserId,l=s.from_teller.id===e;return t.jsx("div",{className:"px-4 py-3 hover:bg-gray-800/30 transition-colors",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("span",{className:`px-2 py-0.5 text-[10px] font-bold rounded ${l?"bg-red-700":"bg-green-700"}`,children:l?"SENT":"RECEIVED"}),t.jsx("span",{className:"text-white text-sm font-semibold",children:l?`To: ${s.to_teller.name}`:`From: ${s.from_teller.name}`})]}),t.jsx("div",{className:"text-xs text-gray-500",children:new Date(s.created_at).toLocaleString()}),s.remarks&&t.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:s.remarks})]}),t.jsxs("div",{className:`text-lg font-black tabular-nums ${l?"text-red-400":"text-green-400"}`,children:[l?"-":"+","â‚±",s.amount.toLocaleString()]})]})},s.id)}function me(s){return t.jsxs("option",{value:s.id,children:[s.name," (",s.email,")"]},s.id)}export{pe as default};
