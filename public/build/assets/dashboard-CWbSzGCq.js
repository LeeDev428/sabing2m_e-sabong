import{R as k,r as R,j as e,H as pe,b as q,a as we}from"./app-vYlZ7Y46.js";import{T as Ne}from"./teller-layout-BHSv5fpR.js";import{s as z}from"./toast-kz1Cz6CV.js";import{t as O}from"./thermalPrinter-BNfcEuiN.js";import"./app-BDbIp7eZ.js";var ve=Object.defineProperty,ee=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable,ae=(g,o,i)=>o in g?ve(g,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):g[o]=i,ne=(g,o)=>{for(var i in o||(o={}))le.call(o,i)&&ae(g,i,o[i]);if(ee)for(var i of ee(o))ie.call(o,i)&&ae(g,i,o[i]);return g},re=(g,o)=>{var i={};for(var u in g)le.call(g,u)&&o.indexOf(u)<0&&(i[u]=g[u]);if(g!=null&&ee)for(var u of ee(g))o.indexOf(u)<0&&ie.call(g,u)&&(i[u]=g[u]);return i};var U;(g=>{const o=class w{constructor(t,n,s,r){if(this.version=t,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],t<w.MIN_VERSION||t>w.MAX_VERSION)throw new RangeError("Version value out of range");if(r<-1||r>7)throw new RangeError("Mask value out of range");this.size=t*4+17;let a=[];for(let c=0;c<this.size;c++)a.push(!1);for(let c=0;c<this.size;c++)this.modules.push(a.slice()),this.isFunction.push(a.slice());this.drawFunctionPatterns();const h=this.addEccAndInterleave(s);if(this.drawCodewords(h),r==-1){let c=1e9;for(let p=0;p<8;p++){this.applyMask(p),this.drawFormatBits(p);const m=this.getPenaltyScore();m<c&&(r=p,c=m),this.applyMask(p)}}f(0<=r&&r<=7),this.mask=r,this.applyMask(r),this.drawFormatBits(r),this.isFunction=[]}static encodeText(t,n){const s=g.QrSegment.makeSegments(t);return w.encodeSegments(s,n)}static encodeBinary(t,n){const s=g.QrSegment.makeBytes(t);return w.encodeSegments([s],n)}static encodeSegments(t,n,s=1,r=40,a=-1,h=!0){if(!(w.MIN_VERSION<=s&&s<=r&&r<=w.MAX_VERSION)||a<-1||a>7)throw new RangeError("Invalid value");let c,p;for(c=s;;c++){const b=w.getNumDataCodewords(c,n)*8,N=l.getTotalBits(t,c);if(N<=b){p=N;break}if(c>=r)throw new RangeError("Data too long")}for(const b of[w.Ecc.MEDIUM,w.Ecc.QUARTILE,w.Ecc.HIGH])h&&p<=w.getNumDataCodewords(c,b)*8&&(n=b);let m=[];for(const b of t){i(b.mode.modeBits,4,m),i(b.numChars,b.mode.numCharCountBits(c),m);for(const N of b.getData())m.push(N)}f(m.length==p);const T=w.getNumDataCodewords(c,n)*8;f(m.length<=T),i(0,Math.min(4,T-m.length),m),i(0,(8-m.length%8)%8,m),f(m.length%8==0);for(let b=236;m.length<T;b^=253)i(b,8,m);let E=[];for(;E.length*8<m.length;)E.push(0);return m.forEach((b,N)=>E[N>>>3]|=b<<7-(N&7)),new w(c,n,E,a)}getModule(t,n){return 0<=t&&t<this.size&&0<=n&&n<this.size&&this.modules[n][t]}getModules(){return this.modules}drawFunctionPatterns(){for(let s=0;s<this.size;s++)this.setFunctionModule(6,s,s%2==0),this.setFunctionModule(s,6,s%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const t=this.getAlignmentPatternPositions(),n=t.length;for(let s=0;s<n;s++)for(let r=0;r<n;r++)s==0&&r==0||s==0&&r==n-1||s==n-1&&r==0||this.drawAlignmentPattern(t[s],t[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(t){const n=this.errorCorrectionLevel.formatBits<<3|t;let s=n;for(let a=0;a<10;a++)s=s<<1^(s>>>9)*1335;const r=(n<<10|s)^21522;f(r>>>15==0);for(let a=0;a<=5;a++)this.setFunctionModule(8,a,u(r,a));this.setFunctionModule(8,7,u(r,6)),this.setFunctionModule(8,8,u(r,7)),this.setFunctionModule(7,8,u(r,8));for(let a=9;a<15;a++)this.setFunctionModule(14-a,8,u(r,a));for(let a=0;a<8;a++)this.setFunctionModule(this.size-1-a,8,u(r,a));for(let a=8;a<15;a++)this.setFunctionModule(8,this.size-15+a,u(r,a));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let t=this.version;for(let s=0;s<12;s++)t=t<<1^(t>>>11)*7973;const n=this.version<<12|t;f(n>>>18==0);for(let s=0;s<18;s++){const r=u(n,s),a=this.size-11+s%3,h=Math.floor(s/3);this.setFunctionModule(a,h,r),this.setFunctionModule(h,a,r)}}drawFinderPattern(t,n){for(let s=-4;s<=4;s++)for(let r=-4;r<=4;r++){const a=Math.max(Math.abs(r),Math.abs(s)),h=t+r,c=n+s;0<=h&&h<this.size&&0<=c&&c<this.size&&this.setFunctionModule(h,c,a!=2&&a!=4)}}drawAlignmentPattern(t,n){for(let s=-2;s<=2;s++)for(let r=-2;r<=2;r++)this.setFunctionModule(t+r,n+s,Math.max(Math.abs(r),Math.abs(s))!=1)}setFunctionModule(t,n,s){this.modules[n][t]=s,this.isFunction[n][t]=!0}addEccAndInterleave(t){const n=this.version,s=this.errorCorrectionLevel;if(t.length!=w.getNumDataCodewords(n,s))throw new RangeError("Invalid argument");const r=w.NUM_ERROR_CORRECTION_BLOCKS[s.ordinal][n],a=w.ECC_CODEWORDS_PER_BLOCK[s.ordinal][n],h=Math.floor(w.getNumRawDataModules(n)/8),c=r-h%r,p=Math.floor(h/r);let m=[];const T=w.reedSolomonComputeDivisor(a);for(let b=0,N=0;b<r;b++){let I=t.slice(N,N+p-a+(b<c?0:1));N+=I.length;const F=w.reedSolomonComputeRemainder(I,T);b<c&&I.push(0),m.push(I.concat(F))}let E=[];for(let b=0;b<m[0].length;b++)m.forEach((N,I)=>{(b!=p-a||I>=c)&&E.push(N[b])});return f(E.length==h),E}drawCodewords(t){if(t.length!=Math.floor(w.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let s=this.size-1;s>=1;s-=2){s==6&&(s=5);for(let r=0;r<this.size;r++)for(let a=0;a<2;a++){const h=s-a,p=(s+1&2)==0?this.size-1-r:r;!this.isFunction[p][h]&&n<t.length*8&&(this.modules[p][h]=u(t[n>>>3],7-(n&7)),n++)}}f(n==t.length*8)}applyMask(t){if(t<0||t>7)throw new RangeError("Mask value out of range");for(let n=0;n<this.size;n++)for(let s=0;s<this.size;s++){let r;switch(t){case 0:r=(s+n)%2==0;break;case 1:r=n%2==0;break;case 2:r=s%3==0;break;case 3:r=(s+n)%3==0;break;case 4:r=(Math.floor(s/3)+Math.floor(n/2))%2==0;break;case 5:r=s*n%2+s*n%3==0;break;case 6:r=(s*n%2+s*n%3)%2==0;break;case 7:r=((s+n)%2+s*n%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[n][s]&&r&&(this.modules[n][s]=!this.modules[n][s])}}getPenaltyScore(){let t=0;for(let a=0;a<this.size;a++){let h=!1,c=0,p=[0,0,0,0,0,0,0];for(let m=0;m<this.size;m++)this.modules[a][m]==h?(c++,c==5?t+=w.PENALTY_N1:c>5&&t++):(this.finderPenaltyAddHistory(c,p),h||(t+=this.finderPenaltyCountPatterns(p)*w.PENALTY_N3),h=this.modules[a][m],c=1);t+=this.finderPenaltyTerminateAndCount(h,c,p)*w.PENALTY_N3}for(let a=0;a<this.size;a++){let h=!1,c=0,p=[0,0,0,0,0,0,0];for(let m=0;m<this.size;m++)this.modules[m][a]==h?(c++,c==5?t+=w.PENALTY_N1:c>5&&t++):(this.finderPenaltyAddHistory(c,p),h||(t+=this.finderPenaltyCountPatterns(p)*w.PENALTY_N3),h=this.modules[m][a],c=1);t+=this.finderPenaltyTerminateAndCount(h,c,p)*w.PENALTY_N3}for(let a=0;a<this.size-1;a++)for(let h=0;h<this.size-1;h++){const c=this.modules[a][h];c==this.modules[a][h+1]&&c==this.modules[a+1][h]&&c==this.modules[a+1][h+1]&&(t+=w.PENALTY_N2)}let n=0;for(const a of this.modules)n=a.reduce((h,c)=>h+(c?1:0),n);const s=this.size*this.size,r=Math.ceil(Math.abs(n*20-s*10)/s)-1;return f(0<=r&&r<=9),t+=r*w.PENALTY_N4,f(0<=t&&t<=2568888),t}getAlignmentPatternPositions(){if(this.version==1)return[];{const t=Math.floor(this.version/7)+2,n=this.version==32?26:Math.ceil((this.version*4+4)/(t*2-2))*2;let s=[6];for(let r=this.size-7;s.length<t;r-=n)s.splice(1,0,r);return s}}static getNumRawDataModules(t){if(t<w.MIN_VERSION||t>w.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*t+128)*t+64;if(t>=2){const s=Math.floor(t/7)+2;n-=(25*s-10)*s-55,t>=7&&(n-=36)}return f(208<=n&&n<=29648),n}static getNumDataCodewords(t,n){return Math.floor(w.getNumRawDataModules(t)/8)-w.ECC_CODEWORDS_PER_BLOCK[n.ordinal][t]*w.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][t]}static reedSolomonComputeDivisor(t){if(t<1||t>255)throw new RangeError("Degree out of range");let n=[];for(let r=0;r<t-1;r++)n.push(0);n.push(1);let s=1;for(let r=0;r<t;r++){for(let a=0;a<n.length;a++)n[a]=w.reedSolomonMultiply(n[a],s),a+1<n.length&&(n[a]^=n[a+1]);s=w.reedSolomonMultiply(s,2)}return n}static reedSolomonComputeRemainder(t,n){let s=n.map(r=>0);for(const r of t){const a=r^s.shift();s.push(0),n.forEach((h,c)=>s[c]^=w.reedSolomonMultiply(h,a))}return s}static reedSolomonMultiply(t,n){if(t>>>8||n>>>8)throw new RangeError("Byte out of range");let s=0;for(let r=7;r>=0;r--)s=s<<1^(s>>>7)*285,s^=(n>>>r&1)*t;return f(s>>>8==0),s}finderPenaltyCountPatterns(t){const n=t[1];f(n<=this.size*3);const s=n>0&&t[2]==n&&t[3]==n*3&&t[4]==n&&t[5]==n;return(s&&t[0]>=n*4&&t[6]>=n?1:0)+(s&&t[6]>=n*4&&t[0]>=n?1:0)}finderPenaltyTerminateAndCount(t,n,s){return t&&(this.finderPenaltyAddHistory(n,s),n=0),n+=this.size,this.finderPenaltyAddHistory(n,s),this.finderPenaltyCountPatterns(s)}finderPenaltyAddHistory(t,n){n[0]==0&&(t+=this.size),n.pop(),n.unshift(t)}};o.MIN_VERSION=1,o.MAX_VERSION=40,o.PENALTY_N1=3,o.PENALTY_N2=3,o.PENALTY_N3=40,o.PENALTY_N4=10,o.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],o.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],g.QrCode=o;function i(y,t,n){if(t<0||t>31||y>>>t)throw new RangeError("Value out of range");for(let s=t-1;s>=0;s--)n.push(y>>>s&1)}function u(y,t){return(y>>>t&1)!=0}function f(y){if(!y)throw new Error("Assertion error")}const x=class C{constructor(t,n,s){if(this.mode=t,this.numChars=n,this.bitData=s,n<0)throw new RangeError("Invalid argument");this.bitData=s.slice()}static makeBytes(t){let n=[];for(const s of t)i(s,8,n);return new C(C.Mode.BYTE,t.length,n)}static makeNumeric(t){if(!C.isNumeric(t))throw new RangeError("String contains non-numeric characters");let n=[];for(let s=0;s<t.length;){const r=Math.min(t.length-s,3);i(parseInt(t.substring(s,s+r),10),r*3+1,n),s+=r}return new C(C.Mode.NUMERIC,t.length,n)}static makeAlphanumeric(t){if(!C.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let n=[],s;for(s=0;s+2<=t.length;s+=2){let r=C.ALPHANUMERIC_CHARSET.indexOf(t.charAt(s))*45;r+=C.ALPHANUMERIC_CHARSET.indexOf(t.charAt(s+1)),i(r,11,n)}return s<t.length&&i(C.ALPHANUMERIC_CHARSET.indexOf(t.charAt(s)),6,n),new C(C.Mode.ALPHANUMERIC,t.length,n)}static makeSegments(t){return t==""?[]:C.isNumeric(t)?[C.makeNumeric(t)]:C.isAlphanumeric(t)?[C.makeAlphanumeric(t)]:[C.makeBytes(C.toUtf8ByteArray(t))]}static makeEci(t){let n=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)i(t,8,n);else if(t<16384)i(2,2,n),i(t,14,n);else if(t<1e6)i(6,3,n),i(t,21,n);else throw new RangeError("ECI assignment value out of range");return new C(C.Mode.ECI,0,n)}static isNumeric(t){return C.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return C.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(t,n){let s=0;for(const r of t){const a=r.mode.numCharCountBits(n);if(r.numChars>=1<<a)return 1/0;s+=4+a+r.bitData.length}return s}static toUtf8ByteArray(t){t=encodeURI(t);let n=[];for(let s=0;s<t.length;s++)t.charAt(s)!="%"?n.push(t.charCodeAt(s)):(n.push(parseInt(t.substring(s+1,s+3),16)),s+=2);return n}};x.NUMERIC_REGEX=/^[0-9]*$/,x.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,x.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let l=x;g.QrSegment=x})(U||(U={}));(g=>{(o=>{const i=class{constructor(f,x){this.ordinal=f,this.formatBits=x}};i.LOW=new i(0,1),i.MEDIUM=new i(1,0),i.QUARTILE=new i(2,3),i.HIGH=new i(3,2),o.Ecc=i})(g.QrCode||(g.QrCode={}))})(U||(U={}));(g=>{(o=>{const i=class{constructor(f,x){this.modeBits=f,this.numBitsCharCount=x}numCharCountBits(f){return this.numBitsCharCount[Math.floor((f+7)/17)]}};i.NUMERIC=new i(1,[10,12,14]),i.ALPHANUMERIC=new i(2,[9,11,13]),i.BYTE=new i(4,[8,16,16]),i.KANJI=new i(8,[8,10,12]),i.ECI=new i(7,[0,0,0]),o.Mode=i})(g.QrSegment||(g.QrSegment={}))})(U||(U={}));var H=U;var ye={L:H.QrCode.Ecc.LOW,M:H.QrCode.Ecc.MEDIUM,Q:H.QrCode.Ecc.QUARTILE,H:H.QrCode.Ecc.HIGH},oe=128,ce="L",de="#FFFFFF",he="#000000",ue=!1,xe=1,je=4,Ce=0,Ee=.1;function me(g,o=0){const i=[];return g.forEach(function(u,f){let x=null;u.forEach(function(l,y){if(!l&&x!==null){i.push(`M${x+o} ${f+o}h${y-x}v1H${x+o}z`),x=null;return}if(y===u.length-1){if(!l)return;x===null?i.push(`M${y+o},${f+o} h1v1H${y+o}z`):i.push(`M${x+o},${f+o} h${y+1-x}v1H${x+o}z`);return}l&&x===null&&(x=y)})}),i.join("")}function ge(g,o){return g.slice().map((i,u)=>u<o.y||u>=o.y+o.h?i:i.map((f,x)=>x<o.x||x>=o.x+o.w?f:!1))}function Me(g,o,i,u){if(u==null)return null;const f=g.length+i*2,x=Math.floor(o*Ee),l=f/o,y=(u.width||x)*l,t=(u.height||x)*l,n=u.x==null?g.length/2-y/2:u.x*l,s=u.y==null?g.length/2-t/2:u.y*l,r=u.opacity==null?1:u.opacity;let a=null;if(u.excavate){let c=Math.floor(n),p=Math.floor(s),m=Math.ceil(y+n-c),T=Math.ceil(t+s-p);a={x:c,y:p,w:m,h:T}}const h=u.crossOrigin;return{x:n,y:s,h:t,w:y,excavation:a,opacity:r,crossOrigin:h}}function Se(g,o){return o!=null?Math.max(Math.floor(o),0):g?je:Ce}function fe({value:g,level:o,minVersion:i,includeMargin:u,marginSize:f,imageSettings:x,size:l,boostLevel:y}){let t=k.useMemo(()=>{const c=(Array.isArray(g)?g:[g]).reduce((p,m)=>(p.push(...H.QrSegment.makeSegments(m)),p),[]);return H.QrCode.encodeSegments(c,ye[o],i,void 0,void 0,y)},[g,o,i,y]);const{cells:n,margin:s,numCells:r,calculatedImageSettings:a}=k.useMemo(()=>{let h=t.getModules();const c=Se(u,f),p=h.length+c*2,m=Me(h,l,c,x);return{cells:h,margin:c,numCells:p,calculatedImageSettings:m}},[t,l,x,u,f]);return{qrcode:t,margin:s,cells:n,numCells:r,calculatedImageSettings:a}}var ke=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),Re=k.forwardRef(function(o,i){const u=o,{value:f,size:x=oe,level:l=ce,bgColor:y=de,fgColor:t=he,includeMargin:n=ue,minVersion:s=xe,boostLevel:r,marginSize:a,imageSettings:h}=u,p=re(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:m}=p,T=re(p,["style"]),E=h?.src,b=k.useRef(null),N=k.useRef(null),I=k.useCallback(P=>{b.current=P,typeof i=="function"?i(P):i&&(i.current=P)},[i]),[F,L]=k.useState(!1),{margin:D,cells:$,numCells:Q,calculatedImageSettings:_}=fe({value:f,level:l,minVersion:s,boostLevel:r,includeMargin:n,marginSize:a,imageSettings:h,size:x});k.useEffect(()=>{if(b.current!=null){const P=b.current,A=P.getContext("2d");if(!A)return;let V=$;const B=N.current,K=_!=null&&B!==null&&B.complete&&B.naturalHeight!==0&&B.naturalWidth!==0;K&&_.excavation!=null&&(V=ge($,_.excavation));const X=window.devicePixelRatio||1;P.height=P.width=x*X;const Z=x/Q*X;A.scale(Z,Z),A.fillStyle=y,A.fillRect(0,0,Q,Q),A.fillStyle=t,ke?A.fill(new Path2D(me(V,D))):$.forEach(function(te,J){te.forEach(function(d,M){d&&A.fillRect(M+D,J+D,1,1)})}),_&&(A.globalAlpha=_.opacity),K&&A.drawImage(B,_.x+D,_.y+D,_.w,_.h)}}),k.useEffect(()=>{L(!1)},[E]);const Y=ne({height:x,width:x},m);let j=null;return E!=null&&(j=k.createElement("img",{src:E,key:E,style:{display:"none"},onLoad:()=>{L(!0)},ref:N,crossOrigin:_?.crossOrigin})),k.createElement(k.Fragment,null,k.createElement("canvas",ne({style:Y,height:x,width:x,ref:I,role:"img"},T)),j)});Re.displayName="QRCodeCanvas";var be=k.forwardRef(function(o,i){const u=o,{value:f,size:x=oe,level:l=ce,bgColor:y=de,fgColor:t=he,includeMargin:n=ue,minVersion:s=xe,boostLevel:r,title:a,marginSize:h,imageSettings:c}=u,p=re(u,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:m,cells:T,numCells:E,calculatedImageSettings:b}=fe({value:f,level:l,minVersion:s,boostLevel:r,includeMargin:n,marginSize:h,imageSettings:c,size:x});let N=T,I=null;c!=null&&b!=null&&(b.excavation!=null&&(N=ge(T,b.excavation)),I=k.createElement("image",{href:c.src,height:b.h,width:b.w,x:b.x+m,y:b.y+m,preserveAspectRatio:"none",opacity:b.opacity,crossOrigin:b.crossOrigin}));const F=me(N,m);return k.createElement("svg",ne({height:x,width:x,viewBox:`0 0 ${E} ${E}`,ref:i,role:"img"},p),!!a&&k.createElement("title",null,a),k.createElement("path",{fill:y,d:`M0,0 h${E}v${E}H0z`,shapeRendering:"crispEdges"}),k.createElement("path",{fill:t,d:F,shapeRendering:"crispEdges"}),I)});be.displayName="QRCodeSVG";function Fe({fights:g=[],summary:o,tellerBalance:i=0,auth:u}){const[f,x]=R.useState("50"),[l,y]=R.useState(g.find(d=>d.status==="open"||d.status==="lastcall")||null),[t,n]=R.useState(null),[s,r]=R.useState(!1),[a,h]=R.useState(null),[c,p]=R.useState(i),[m,T]=R.useState(null),[E,b]=R.useState(!1),[N,I]=R.useState(null),F=R.useRef(null),[L,D]=R.useState(!1),[$,Q]=R.useState([]),[_,Y]=R.useState("current");R.useEffect(()=>{(async()=>{try{navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(v=>{v.getTracks().forEach(S=>S.stop()),console.log("âœ… Camera permission granted")})}catch(v){console.log("Camera permission denied or not available:",v)}})(),O.initialize().then(()=>{D(O.isConnected())});const M=v=>{D(v)};return O.addConnectionListener(M),()=>{O.removeConnectionListener(M)}},[]),R.useEffect(()=>{const d=async()=>{try{const v=await q.get("/teller/api/teller/live-data");p(v.data.balance)}catch(v){console.error("Failed to fetch live data:",v)}};d();const M=setInterval(d,2e3);return()=>clearInterval(M)},[]),R.useEffect(()=>{if(!l)return;const d=async()=>{try{const v=await q.get(`/teller/api/fights/${l.id}/bet-totals`);T(v.data)}catch(v){console.error("Failed to fetch bet totals:",v)}};d();const M=setInterval(d,2e3);return()=>clearInterval(M)},[l?.id]),R.useEffect(()=>{if(!l)return;const d=async()=>{try{const v=await q.get(`/teller/api/fights/${l.id}/odds`);h(v.data),v.data.status!==l.status&&y(v.data)}catch(v){console.error("Failed to fetch odds:",v)}};d();const M=setInterval(d,2e3);return()=>clearInterval(M)},[l?.id]);const j=a||l;R.useEffect(()=>{const M=setInterval(async()=>{try{const S=(await q.get("/teller/api/fights/open")).data;if(!l&&S.length>0)y(S[0]),n(null);else if(l&&l.status==="closed"&&S.length>0){const G=S.find(W=>W.id!==l.id);G&&(y(G),n(null))}}catch(v){console.error("Failed to check for new fights:",v)}},3e3);return()=>clearInterval(M)},[l]);const P=d=>{x(f==="0"?d:f+d)},A=()=>{x("0")},V=d=>{x(d.toString())},B=()=>{const d=parseInt(f)||0;x((d+1).toString())},K=()=>{const d=parseInt(f)||0;d>0&&x((d-1).toString())},X=async d=>{console.log("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"),console.log("ðŸ–¨ï¸  AUTO-PRINT START (Direct Function Call)"),console.log("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"),console.log("ðŸ“Š Checking printer connection...");const M=O.isConnected(),v=O.getConnectedDevice();if(console.log("Printer Status:"),console.log("  - isConnected():",M),console.log("  - device:",v),console.log("  - device name:",v?.name||"N/A"),console.log("  - device ID:",v?.deviceId||"N/A"),!M){console.warn("âš ï¸  PRINTER NOT CONNECTED - Aborting print"),z("âš ï¸ Printer not connected","warning",2e3);return}console.log("âœ… PRINTER IS CONNECTED"),console.log("ðŸ“„ Ticket Data:",d);try{console.log("â³ Calling thermalPrinter.printTicket()..."),await O.printTicket({ticket_id:d.ticket_id,fight_number:d.fight_number,side:d.side,amount:d.amount,odds:d.odds,potential_payout:d.potential_payout}),console.log("âœ…âœ…âœ… PRINT COMPLETED SUCCESSFULLY! âœ…âœ…âœ…"),z("âœ“ Receipt printed!","success",2e3)}catch(S){console.error("âŒâŒâŒ PRINT ERROR âŒâŒâŒ"),console.error("Error:",S),console.error("Message:",S.message),console.error("Stack:",S.stack),z(`âŒ Print failed: ${S.message}`,"error",4e3)}console.log("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"),console.log("ðŸ–¨ï¸  AUTO-PRINT END"),console.log("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")},Z=()=>{if(!l||!t||!f)return;console.log("ðŸŽ¯ Submitting bet...");const d=parseFloat(f),M=`Bet placed successfully! â‚±${d.toLocaleString()}`;we.post("/teller/bets",{fight_id:l.id,side:t,amount:d},{onSuccess:v=>{console.log("âœ… BET SUCCESSFUL - onSuccess callback fired"),console.log("ðŸ“¦ Page props:",v.props),console.log("ðŸ“¦ Flash data:",v.props.flash),z(M,"success",5e3);const S=v.props.lastTicket;if(console.log("ðŸŽ« Ticket data from server (lastTicket):",S),console.log("ðŸŽ« Ticket exists?",!!S),S){console.log("âœ… TICKET EXISTS - Creating newTicketData..."),console.log("ðŸ” ticket.event_name:",S.event_name),console.log("ðŸ” selectedFight.event_name:",l?.event_name),console.log("ðŸ” selectedFight:",l);const G=S.event_name||l?.event_name||"SABONG EVENT";console.log("ðŸ” Final event_name:",G);const W={ticket_id:S.ticket_id,fight_number:l.fight_number,side:t,amount:d,odds:j?.meron_odds||j?.wala_odds||j?.draw_odds,potential_payout:S.potential_payout,created_at:new Date().toLocaleString(),meron_fighter:l.meron_fighter,wala_fighter:l.wala_fighter,event_name:G};console.log("ðŸ“„ New ticket data created:",W),console.log("ðŸ–¨ï¸ CALLING autoPrintTicket()..."),X(W).catch(se=>{console.error("Auto-print promise rejected:",se)}),Q(se=>[{id:S.ticket_id,side:t,amount:d,fight_number:l.fight_number},...se].slice(0,10)),I(W),b(!0)}else console.error("âŒ NO TICKET DATA from server!");x("50"),n(null)},onError:v=>{console.error("Bet error:",v),z("Failed to place bet. Please try again.","error",4e3)},preserveScroll:!0})},te=async()=>{if(F.current){if(O.isConnected()&&N)try{await O.printTicket({ticket_id:N.ticket_id,fight_number:N.fight_number,side:N.side,amount:N.amount,odds:N.odds,potential_payout:N.potential_payout}),z("Receipt printed to thermal printer!","success",3e3);return}catch(M){console.error("Thermal print error:",M),z(`Thermal printer error: ${M.message}`,"error",4e3)}const d=window.open("","","width=300,height=600");d&&(d.document.write(`
                    <html>
                    <head>
                        <title>Print Ticket</title>
                        <style>
                            body { font-family: monospace; padding: 10px; }
                            .ticket { max-width: 250px; margin: 0 auto; }
                            .qr-code { text-align: center; margin: 15px 0; }
                        </style>
                    </head>
                    <body>${F.current.innerHTML}</body>
                    </html>
                `),d.document.close(),d.focus(),d.print(),d.close())}},J=({mirrored:d=!1})=>e.jsxs("svg",{viewBox:"0 0 110 140",fill:"white",className:"absolute bottom-0 opacity-[0.13] w-full h-[88%] pointer-events-none",style:{transform:d?"scaleX(-1)":"none",transformOrigin:"center"},preserveAspectRatio:"xMidYMax meet",children:[e.jsx("path",{d:"M18,72 C8,52 9,28 18,12 C15,35 15,58 22,78 Z"}),e.jsx("path",{d:"M12,82 C2,60 2,34 12,16 C9,42 10,66 18,88 Z"}),e.jsx("path",{d:"M24,65 C15,47 16,26 24,10 C21,30 21,52 26,70 Z"}),e.jsx("ellipse",{cx:"68",cy:"108",rx:"34",ry:"26"}),e.jsx("path",{d:"M52,82 C49,70 54,56 62,48 L68,66 C62,74 56,82 52,82 Z"}),e.jsx("circle",{cx:"78",cy:"44",r:"18"}),e.jsx("polygon",{points:"91,40 108,44 91,50"}),e.jsx("path",{d:"M68,27 C70,16 76,18 74,28 C78,16 85,20 81,30 C86,18 93,23 88,34",strokeWidth:"0"}),e.jsx("ellipse",{cx:"86",cy:"58",rx:"6",ry:"9"}),e.jsx("path",{d:"M36,100 C48,84 68,82 80,96 C64,88 46,90 36,100 Z",opacity:"0.5"}),e.jsx("rect",{x:"56",y:"130",width:"7",height:"20",rx:"3"}),e.jsx("rect",{x:"72",y:"130",width:"7",height:"20",rx:"3"}),e.jsx("path",{d:"M50,148 L42,152 M50,148 L50,154 M50,148 L58,152",stroke:"white",strokeWidth:"3",strokeLinecap:"round",fill:"none"}),e.jsx("path",{d:"M66,148 L58,152 M66,148 L66,154 M66,148 L74,152",stroke:"white",strokeWidth:"3",strokeLinecap:"round",fill:"none"})]});return e.jsxs(Ne,{currentPage:"dashboard",children:[e.jsx(pe,{title:"Teller - Sabing2m"}),e.jsx("div",{className:"min-h-screen transition-all duration-500",style:{background:t==="meron"?"linear-gradient(to top, #7f0000 0%, #3a0000 35%, #111111 70%)":t==="wala"?"linear-gradient(to top, #00007a 0%, #000035 35%, #111111 70%)":t==="draw"?"linear-gradient(to top, #004d00 0%, #001a00 35%, #111111 70%)":"linear-gradient(to bottom, #1a1a1a, #0d0d0d)"},children:e.jsxs("div",{className:"flex flex-col lg:flex-row",children:[e.jsxs("div",{className:"flex-1 lg:max-w-md mx-auto w-full",children:[e.jsx("div",{className:"px-4 py-2 border-b border-gray-800/60 bg-black/30 backdrop-blur-sm",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-orange-400 tracking-wide",children:"Dashboard"}),e.jsx("div",{className:"text-xs text-gray-400",children:u?.user?.name||"Teller User"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:"Cash Balance"}),e.jsxs("div",{className:"text-xl font-black text-green-400 transition-all duration-300 tabular-nums",children:["â‚±",c.toLocaleString()]}),e.jsxs("div",{className:"flex items-center justify-end gap-1 mt-0.5",children:[e.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${L?"bg-green-400":"bg-gray-600"}`}),e.jsx("span",{className:`text-[10px] ${L?"text-green-400":"text-gray-600"}`,children:L?"Printer OK":"No Printer"})]})]})]})}),l&&e.jsx("div",{className:"bg-black/40 border-b border-gray-800/50 py-1.5",children:e.jsxs("div",{className:"px-4 flex justify-between items-center",children:[e.jsxs("div",{className:"text-xs text-gray-400",children:["Fight #",l.fight_number,l.event_name&&e.jsxs("span",{className:"text-gray-600 ml-2",children:["Â· ",l.event_name]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${l.status==="open"||l.status==="lastcall"?"bg-green-400 animate-pulse":"bg-red-500"}`}),e.jsx("span",{className:`text-xs font-bold tracking-wider ${l.status==="open"||l.status==="lastcall"?"text-green-400":"text-red-400"}`,children:l.status==="open"?"BETTING OPEN":l.status==="lastcall"?"LAST CALL":"BETTING CLOSED"})]})]})}),e.jsxs("div",{className:"px-3 pt-4 pb-4",children:[e.jsxs("div",{className:"grid mb-0",style:{gridTemplateColumns:"1fr 72px 1fr",gap:0},children:[e.jsxs("button",{onClick:()=>l&&j?.meron_betting_open&&n("meron"),disabled:!l||!j?.meron_betting_open,className:`relative overflow-hidden flex flex-col justify-between p-3 min-h-[148px] transition-all duration-200
                                        ${t==="meron"?"ring-2 ring-yellow-400 ring-inset brightness-110":""}
                                        ${!l||!j?.meron_betting_open?"cursor-not-allowed opacity-60":"active:brightness-125"}
                                    `,style:{borderRadius:"14px 0 0 14px",background:"linear-gradient(160deg, #c0392b 0%, #7b0d0d 100%)"},children:[e.jsx(J,{mirrored:!1}),e.jsx("div",{className:"relative z-10 text-left",children:e.jsx("div",{className:"text-white text-2xl font-black tracking-widest drop-shadow-lg",children:"MERON"})}),e.jsxs("div",{className:"relative z-10 text-center mt-auto",children:[e.jsx("div",{className:"text-white/70 text-[10px] uppercase tracking-widest font-semibold",children:"ODDS"}),e.jsx("div",{className:"text-white text-3xl font-black tabular-nums drop-shadow-md",children:j?.meron_odds?Number(j.meron_odds).toFixed(2):"--"}),e.jsx("div",{className:"mt-2 inline-block bg-black/40 rounded-full px-3 py-0.5 text-white/80 text-[11px] font-semibold tabular-nums",children:(m?.meron_total??0).toLocaleString()})]}),l&&!j?.meron_betting_open&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 z-20",style:{borderRadius:"14px 0 0 14px"},children:e.jsx("span",{className:"text-white text-sm font-bold",children:"ðŸ”’ CLOSED"})}),t==="meron"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-yellow-400 z-20"})]}),e.jsxs("div",{className:"flex flex-col items-center",style:{zIndex:10},children:[e.jsxs("div",{className:"w-[68px] h-[78px] bg-gradient-to-b from-yellow-300 via-yellow-500 to-orange-500 flex flex-col items-center justify-center shadow-lg shadow-yellow-900/60 flex-shrink-0",style:{clipPath:"polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)",marginTop:"0px"},children:[e.jsx("span",{className:"text-[9px] font-black text-red-900 uppercase tracking-widest leading-none mt-1",children:"FIGHT"}),e.jsx("span",{className:"text-[22px] font-black text-red-900 leading-none",children:l?.fight_number||"--"})]}),e.jsxs("button",{onClick:()=>l&&j?.draw_betting_open&&n("draw"),disabled:!l||!j?.draw_betting_open,className:`relative w-full flex-1 flex flex-col items-center justify-center transition-all duration-200
                                            ${t==="draw"?"ring-2 ring-inset ring-yellow-400":""}
                                            ${!l||!j?.draw_betting_open?"cursor-not-allowed opacity-60":"active:brightness-125"}
                                        `,style:{background:"linear-gradient(180deg, #145214 0%, #0a2e0a 100%)",minHeight:"70px"},children:[e.jsx("div",{className:"text-green-300 text-[11px] font-black tracking-wider",children:"DRAW"}),e.jsx("div",{className:"text-white/60 text-[9px] uppercase tracking-widest",children:"ODDS"}),e.jsx("div",{className:"text-green-200 text-base font-black tabular-nums",children:j?.draw_odds?Number(j.draw_odds).toFixed(2):"--"}),e.jsx("div",{className:"mt-1 bg-black/40 rounded-full px-2 py-0.5 text-white/70 text-[9px] font-semibold tabular-nums",children:(m?.draw_total??0).toLocaleString()}),t==="draw"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-yellow-400"})]})]}),e.jsxs("button",{onClick:()=>l&&j?.wala_betting_open&&n("wala"),disabled:!l||!j?.wala_betting_open,className:`relative overflow-hidden flex flex-col justify-between p-3 min-h-[148px] transition-all duration-200
                                        ${t==="wala"?"ring-2 ring-yellow-400 ring-inset brightness-110":""}
                                        ${!l||!j?.wala_betting_open?"cursor-not-allowed opacity-60":"active:brightness-125"}
                                    `,style:{borderRadius:"0 14px 14px 0",background:"linear-gradient(160deg, #1565c0 0%, #0a2a6e 100%)"},children:[e.jsx(J,{mirrored:!0}),e.jsx("div",{className:"relative z-10 text-right",children:e.jsx("div",{className:"text-white text-2xl font-black tracking-widest drop-shadow-lg",children:"WALA"})}),e.jsxs("div",{className:"relative z-10 text-center mt-auto",children:[e.jsx("div",{className:"text-white/70 text-[10px] uppercase tracking-widest font-semibold",children:"ODDS"}),e.jsx("div",{className:"text-white text-3xl font-black tabular-nums drop-shadow-md",children:j?.wala_odds?Number(j.wala_odds).toFixed(2):"--"}),e.jsx("div",{className:"mt-2 inline-block bg-black/40 rounded-full px-3 py-0.5 text-white/80 text-[11px] font-semibold tabular-nums",children:(m?.wala_total??0).toLocaleString()})]}),l&&!j?.wala_betting_open&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 z-20",style:{borderRadius:"0 14px 14px 0"},children:e.jsx("span",{className:"text-white text-sm font-bold",children:"ðŸ”’ CLOSED"})}),t==="wala"&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-yellow-400 z-20"})]})]}),e.jsxs("div",{className:"flex justify-between items-center px-1 py-2 mb-2",children:[e.jsxs("div",{className:"text-gray-400 text-xs",children:[e.jsxs("span",{children:["Min: ",e.jsx("span",{className:"text-white font-semibold",children:"20"})]}),e.jsxs("span",{className:"mx-3",children:["Max: ",e.jsx("span",{className:"text-white font-semibold",children:"5,000"})]})]}),e.jsxs("div",{className:"bg-gray-800/80 border border-gray-700 rounded-full px-4 py-1 text-xs text-gray-400 flex gap-1.5 tabular-nums",children:["Total ",e.jsx("span",{className:"text-white font-bold",children:parseInt(f)||0})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("button",{onClick:K,className:"w-14 h-14 bg-red-600 hover:bg-red-500 active:bg-red-700 text-white text-3xl font-black rounded-xl shadow-md shadow-red-900/50 flex items-center justify-center transition-colors flex-shrink-0",children:"âˆ’"}),e.jsx("div",{className:"flex-1 bg-white rounded-xl py-3 px-3 shadow-inner",children:e.jsx("div",{className:"text-black text-4xl font-black text-center tracking-widest tabular-nums",children:f})}),e.jsx("button",{onClick:B,className:"w-14 h-14 bg-red-600 hover:bg-red-500 active:bg-red-700 text-white text-3xl font-black rounded-xl shadow-md shadow-red-900/50 flex items-center justify-center transition-colors flex-shrink-0",children:"+"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[[7,8,9,4,5,6,1,2,3].map(d=>e.jsx("button",{onClick:()=>P(d.toString()),className:"bg-white hover:bg-gray-100 active:bg-gray-200 active:scale-95 text-black rounded-2xl py-4 text-2xl font-bold shadow-md transition-all",children:d},d)),e.jsx("button",{className:"bg-white text-gray-400 rounded-2xl py-4 text-2xl font-bold shadow-md cursor-not-allowed",disabled:!0,children:"."}),e.jsx("button",{onClick:()=>P("0"),className:"bg-white hover:bg-gray-100 active:bg-gray-200 active:scale-95 text-black rounded-2xl py-4 text-2xl font-bold shadow-md transition-all",children:"0"}),e.jsx("button",{onClick:A,className:"bg-white hover:bg-gray-100 active:bg-gray-200 active:scale-95 text-black rounded-2xl py-4 text-sm font-bold shadow-md transition-all tracking-wide",children:"CLEAR"})]}),e.jsx("div",{className:"grid grid-cols-5 gap-1.5 mb-3",children:[50,100,200,500,1e3].map(d=>e.jsxs("button",{onClick:()=>V(d),className:"bg-[#1c1c2e] hover:bg-[#2a2a40] active:scale-95 border border-gray-700/60 text-white rounded-xl py-2.5 px-1 flex flex-col items-center gap-0.5 transition-all shadow-md",children:[e.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",className:"w-4 h-4 text-yellow-400",children:[e.jsx("path",{d:"M15 5H9a2 2 0 00-2 2v10a2 2 0 002 2h6a2 2 0 002-2V7a2 2 0 00-2-2z"}),e.jsx("path",{d:"M9 10h6M9 14h4",strokeLinecap:"round"})]}),e.jsx("span",{className:"text-[11px] font-bold leading-none tabular-nums",children:d>=1e3?`${d/1e3}K`:d})]},d))}),e.jsx("button",{onClick:Z,disabled:!t||!l||l.status!=="open"&&l.status!=="lastcall",className:`w-full py-5 rounded-2xl text-2xl font-black mb-3 uppercase tracking-[0.15em] transition-all shadow-lg ${t&&l&&(l.status==="open"||l.status==="lastcall")?"bg-red-600 hover:bg-red-500 active:bg-red-700 active:scale-[0.99] text-white shadow-red-900/60":"bg-gray-800 cursor-not-allowed text-gray-500"}`,children:l?l.status!=="open"&&l.status!=="lastcall"?"BETTING CLOSED":"SUBMIT":"NO FIGHT"}),e.jsxs("button",{onClick:()=>r(!0),className:"w-full bg-[#1e2d3d] hover:bg-[#2a3d52] active:bg-[#162330] py-3.5 rounded-xl font-bold text-base flex items-center justify-center gap-2 text-white transition-all border border-gray-700/50 shadow-md",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),"VIEW SUMMARY"]})]})]}),e.jsx("div",{className:"hidden lg:block w-96 bg-[#111111] border-l border-gray-800/60 min-h-screen",children:e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4 tracking-wider",children:"BET SUMMARY"}),e.jsx("div",{className:"bg-[#1e1e1e] rounded-xl p-3 mb-4 border border-gray-800/50",children:e.jsx("div",{className:"text-white font-semibold text-center",children:l?.event_name||"No Event"})}),t&&e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"SIDE"}),e.jsx("span",{className:`px-3 py-1 rounded-lg text-sm font-bold ${t==="meron"?"bg-red-700 text-white":t==="draw"?"bg-green-700 text-white":"bg-blue-700 text-white"}`,children:t.toUpperCase()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"AMOUNT"}),e.jsxs("span",{className:"text-white font-bold tabular-nums",children:["â‚±",parseInt(f||"0").toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"FIGHT NUMBER"}),e.jsx("span",{className:"text-white font-bold",children:l?.fight_number||"--"})]})]}),l?.venue&&e.jsx("div",{className:"text-gray-600 text-xs text-center mb-4",children:l.venue}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("button",{onClick:()=>Y("current"),className:`flex-1 py-2 px-4 rounded-xl text-sm font-semibold transition-colors ${_==="current"?"bg-[#2a2a2a] text-white":"bg-transparent text-gray-600 hover:text-gray-300"}`,children:"Current Bets"}),e.jsx("button",{onClick:()=>Y("today"),className:`flex-1 py-2 px-4 rounded-xl text-sm font-semibold transition-colors ${_==="today"?"bg-[#2a2a2a] text-white":"bg-transparent text-gray-600 hover:text-gray-300"}`,children:"Today's Report"})]}),e.jsxs("div",{className:"border-t border-gray-800 pt-4",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-3 px-2",children:[e.jsx("span",{children:"Item"}),e.jsx("span",{children:"Bet Amount"})]}),_==="current"?$.length>0?e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:$.map(d=>e.jsxs("div",{className:"flex justify-between items-center bg-[#1e1e1e] rounded-xl p-3 border border-gray-800/40",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${d.side==="meron"?"bg-red-500":d.side==="draw"?"bg-green-500":"bg-blue-500"}`}),e.jsxs("span",{className:"text-white text-sm",children:["Fight #",d.fight_number," - ",d.side.toUpperCase()]})]}),e.jsxs("span",{className:"text-white font-bold text-sm tabular-nums",children:["â‚±",d.amount.toLocaleString()]})]},d.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-orange-400 text-4xl mb-2",children:"ðŸ“"}),e.jsx("div",{className:"text-gray-600 text-sm",children:"Current Bets Will Show Here"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center bg-[#1e1e1e] rounded-xl p-3 border border-gray-800/40",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Total Bets"}),e.jsx("span",{className:"text-white font-bold",children:o?.total_bets||0})]}),e.jsxs("div",{className:"flex justify-between items-center bg-[#1e1e1e] rounded-xl p-3 border border-gray-800/40",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Total Amount"}),e.jsxs("span",{className:"text-yellow-400 font-bold tabular-nums",children:["â‚±",(o?.total_bet_amount||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center bg-[#1e1e1e] rounded-xl p-3 border border-gray-800/40",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Meron"}),e.jsx("span",{className:"text-red-400 font-bold",children:o?.meron_bets||0})]}),e.jsxs("div",{className:"flex justify-between items-center bg-[#1e1e1e] rounded-xl p-3 border border-gray-800/40",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Wala"}),e.jsx("span",{className:"text-blue-400 font-bold",children:o?.wala_bets||0})]})]})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-800",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-gray-500 text-sm",children:"Cash Balance"}),e.jsxs("span",{className:"text-green-400 font-bold text-lg tabular-nums",children:["â‚±",c.toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${L?"bg-green-400":"bg-gray-600"}`}),e.jsx("span",{className:`text-xs ${L?"text-green-400":"text-gray-600"}`,children:L?"Printer Connected":"No Printer"})]})]})]})})]})}),s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-[#1a2332] rounded-lg w-full max-w-md border-2 border-gray-600",children:[e.jsxs("div",{className:"bg-[#2a3544] px-6 py-3 flex justify-between items-center rounded-t-lg border-b border-gray-700",children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“Š"})," VIEW SUMMARY"]}),e.jsx("button",{onClick:()=>r(!1),className:"text-white hover:text-gray-200 text-3xl leading-none",children:"Ã—"})]}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsxs("div",{className:"bg-[#0f1419] p-4 rounded-lg border border-gray-800",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Fight Summary"}),e.jsxs("div",{className:"text-2xl font-bold flex gap-4",children:[e.jsxs("span",{className:"text-red-400",children:["M: ",o?.meron_bets||0]}),e.jsxs("span",{className:"text-blue-400",children:["W: ",o?.wala_bets||0]}),e.jsxs("span",{className:"text-green-400",children:["D: ",o?.draw_bets||0]})]})]}),e.jsxs("div",{className:"bg-[#0f1419] p-4 rounded-lg border border-gray-800",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Total Bets"}),e.jsx("div",{className:"text-3xl font-bold",children:o?.total_bets||0})]}),e.jsxs("div",{className:"bg-[#0f1419] p-4 rounded-lg border border-gray-800",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Total Bet Amount"}),e.jsxs("div",{className:"text-3xl font-bold text-yellow-400",children:["â‚± ",o?.total_bet_amount?Number(o.total_bet_amount).toLocaleString("en-PH",{minimumFractionDigits:2}):"0.00"]})]}),e.jsxs("div",{className:"bg-[#0f1419] p-4 rounded-lg border border-gray-800",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Total Payouts"}),e.jsxs("div",{className:"text-3xl font-bold text-green-400",children:["â‚± ",o?.total_payouts?Number(o.total_payouts).toLocaleString("en-PH",{minimumFractionDigits:2}):"0.00"]})]}),e.jsxs("div",{className:"bg-[#0f1419] p-4 rounded-lg border border-gray-800",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Active Bets"}),e.jsx("div",{className:"text-3xl font-bold text-orange-400",children:o?.active_bets||0})]})]}),e.jsx("div",{className:"p-6 pt-0",children:e.jsx("button",{onClick:()=>r(!1),className:"w-full bg-[#2a3544] hover:bg-[#3a4554] py-4 rounded-lg font-bold text-lg",children:"BACK"})})]})}),!l&&!s&&e.jsxs("div",{className:"text-center text-gray-400 mt-20 px-4",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“"}),e.jsx("h2",{className:"text-2xl font-bold mb-2 text-white",children:"No Open Fights"}),e.jsx("p",{className:"text-gray-500",children:"Waiting for next fight to open..."})]}),E&&N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white text-black rounded-lg w-full max-w-sm",children:[e.jsxs("div",{ref:F,className:"ticket p-3",children:[e.jsx("div",{className:"text-center border-b-2 border-dashed border-gray-800 pb-1 mb-2",children:e.jsx("h1",{className:"text-lg font-bold tracking-wide uppercase",children:N.event_name})}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(be,{value:N.ticket_id,size:100,level:"H",includeMargin:!1})}),e.jsxs("div",{className:"flex-1 space-y-0 text-xs leading-tight",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"font-bold",children:"Fight#:"}),e.jsx("span",{children:N.fight_number})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"font-bold",children:"Teller:"}),e.jsx("span",{children:"Teller"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"font-bold",children:"Receipt:"}),e.jsx("span",{className:"font-mono text-[10px]",children:N.ticket_id.substring(0,13)})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"font-bold",children:"Date:"}),e.jsx("span",{children:new Date().toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"numeric"})})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("span",{className:"font-bold",children:"Time:"}),e.jsx("span",{children:new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]})]}),e.jsx("div",{className:"border-t-2 border-dashed border-gray-800 pt-2 mb-2 text-center",children:e.jsxs("div",{className:`text-2xl font-bold mb-0.5 ${N.side==="meron"?"text-red-600":N.side==="wala"?"text-blue-600":"text-green-600"}`,children:[N.side.toUpperCase()," - â‚±",N.amount.toLocaleString()]})}),e.jsx("div",{className:"text-center border-t-2 border-dashed border-gray-800 pt-1",children:e.jsx("p",{className:"text-[10px] font-bold tracking-widest",children:"OFFICIAL BETTING RECEIPT"})})]}),e.jsxs("div",{className:"p-4 bg-gray-100 flex gap-3 rounded-b-lg print:hidden",children:[e.jsx("button",{onClick:te,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-bold",children:"ðŸ–¨ï¸ PRINT"}),e.jsx("button",{onClick:()=>{b(!1),I(null)},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-3 rounded-lg font-bold",children:"CLOSE"})]})]})})]})}export{Fe as default};
