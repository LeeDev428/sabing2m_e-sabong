import{c as O,r as D,j as e,a as W,H as P}from"./app-vy5bNWhj.js";import{D as z}from"./declarator-layout-CoQ_id3y.js";import"./app-PBvFZhw_.js";function se(s){const t=O.c(34),{fights:L}=s,m=L===void 0?[]:L,[E,d]=D.useState(!1),[l,c]=D.useState(null),[r,a]=D.useState(null);let x;t[0]===Symbol.for("react.memo_cache_sentinel")?(x=[],t[0]=x):x=t[0],D.useEffect(X,x);const A=m.filter(Q),$=m.filter(K).length;let g;t[1]!==r||t[2]!==l||t[3]!==a||t[4]!==c||t[5]!==d?(g=()=>{!l||!r||W.post("/declarator/results",{fight_id:l.id,result:r},{onSuccess:()=>{d(!1),c(null),a(null)}})},t[1]=r,t[2]=l,t[3]=a,t[4]=c,t[5]=d,t[6]=g):g=t[6];const R=g;let b,h;t[7]===Symbol.for("react.memo_cache_sentinel")?(b=e.jsx(P,{title:"Declarator Dashboard"}),h=e.jsx("br",{}),t[7]=b,t[8]=h):(b=t[7],h=t[8]);let u;t[9]===Symbol.for("react.memo_cache_sentinel")?(u=e.jsx("div",{className:"mb-6 lg:mb-8 flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold",children:"Declarator Dashboard"}),e.jsx("p",{className:"text-sm lg:text-base text-gray-400",children:"Declare fight results and manage outcomes"})]})}),t[9]=u):u=t[9];let f;t[10]===Symbol.for("react.memo_cache_sentinel")?(f=e.jsx("div",{className:"text-xs lg:text-sm text-gray-400 mb-2",children:"Pending Results"}),t[10]=f):f=t[10];let p;t[11]===Symbol.for("react.memo_cache_sentinel")?(p=e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Fights awaiting declaration"}),t[11]=p):p=t[11];let y;t[12]===Symbol.for("react.memo_cache_sentinel")?(y=e.jsx("div",{className:"text-xs lg:text-sm text-gray-400 mb-2",children:"Declared Today"}),t[12]=y):y=t[12];let N;t[13]===Symbol.for("react.memo_cache_sentinel")?(N=e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Results declared today"}),t[13]=N):N=t[13];let j;t[14]===Symbol.for("react.memo_cache_sentinel")?(j=e.jsx("div",{className:"text-xs lg:text-sm text-gray-400 mb-2",children:"Total Fights"}),t[14]=j):j=t[14];let v;t[15]===Symbol.for("react.memo_cache_sentinel")?(v=e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"All fight events"}),t[15]=v):v=t[15];let _;t[16]===Symbol.for("react.memo_cache_sentinel")?(_=e.jsxs("div",{className:"p-4 lg:p-6 border-b border-gray-700",children:[e.jsx("h2",{className:"text-lg lg:text-xl font-bold",children:"Pending Declarations"}),e.jsx("p",{className:"text-xs lg:text-sm text-gray-400",children:"Fights with closed betting awaiting result declaration"})]}),t[16]=_):_=t[16];const k=A.length>0?e.jsx("div",{className:"space-y-4",children:A.map(n=>e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 flex items-center justify-between hover:bg-gray-600 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:"font-bold text-lg",children:["Fight #",n.fight_number]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-yellow-600",children:"â±ï¸ AWAITING RESULT"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm mb-2",children:[e.jsxs("span",{className:"text-red-400 font-medium",children:["MERON: ",n.meron_fighter," (",n.meron_odds||"N/A",")"]}),e.jsx("span",{className:"text-gray-500",children:"vs"}),e.jsxs("span",{className:"text-blue-400 font-medium",children:["WALA: ",n.wala_fighter," (",n.wala_odds||"N/A",")"]})]}),n.betting_closed_at&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Betting closed: ",new Date(n.betting_closed_at).toLocaleString()]})]}),e.jsx("button",{onClick:()=>{c(n),d(!0)},className:"px-6 py-3 bg-green-600 hover:bg-green-700 rounded-lg font-semibold",children:"ðŸ† Declare Result"})]},n.id))}):e.jsx("div",{className:"text-center py-12 text-gray-400",children:"No pending declarations. All fights have been processed."});let w;t[17]!==k?(w=e.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700",children:[_,e.jsx("div",{className:"p-4 lg:p-6",children:k})]}),t[17]=k,t[18]=w):w=t[18];const T="mt-8 bg-gray-800 rounded-lg border border-gray-700";let i;t[19]===Symbol.for("react.memo_cache_sentinel")?(i=e.jsxs("div",{className:"p-6 border-b border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Recent Declarations"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Latest declared fight results"})]}),t[19]=i):i=t[19];const I="p-6",M=m.filter(J).length>0?e.jsx("div",{className:"space-y-3",children:m.filter(q).slice(0,5).map(V)}):e.jsx("div",{className:"text-center py-8 text-gray-400",children:"No declared results yet"});let o;t[20]!==M?(o=e.jsx("div",{className:I,children:M}),t[20]=M,t[21]=o):o=t[21];let F;t[22]!==i||t[23]!==o?(F=e.jsxs("div",{className:T,children:[i,o]}),t[22]=i,t[23]=o,t[24]=F):F=t[24];let C;t[25]!==R||t[26]!==r||t[27]!==l||t[28]!==a||t[29]!==c||t[30]!==d||t[31]!==E?(C=E&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full",children:[e.jsxs("div",{className:"p-6 border-b border-gray-700",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Declare Fight Result"}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Fight #",l.fight_number,": ",l.meron_fighter," vs ",l.wala_fighter]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>a("meron"),className:`p-8 rounded-lg border-2 transition-all ${r==="meron"?"bg-red-600 border-red-400 scale-105":"bg-gray-700 border-gray-600 hover:border-red-400"}`,children:[e.jsx("div",{className:"text-3xl font-bold mb-2",children:"MERON"}),e.jsx("div",{className:"text-sm",children:l.meron_fighter}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Odds: ",l.meron_odds||"N/A"]})]}),e.jsxs("button",{onClick:()=>a("wala"),className:`p-8 rounded-lg border-2 transition-all ${r==="wala"?"bg-blue-600 border-blue-400 scale-105":"bg-gray-700 border-gray-600 hover:border-blue-400"}`,children:[e.jsx("div",{className:"text-3xl font-bold mb-2",children:"WALA"}),e.jsx("div",{className:"text-sm",children:l.wala_fighter}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Odds: ",l.wala_odds||"N/A"]})]}),e.jsxs("button",{onClick:()=>a("draw"),className:`p-8 rounded-lg border-2 transition-all ${r==="draw"?"bg-green-600 border-green-400 scale-105":"bg-gray-700 border-gray-600 hover:border-green-400"}`,children:[e.jsx("div",{className:"text-3xl font-bold mb-2",children:"DRAW"}),e.jsx("div",{className:"text-sm",children:"Match Draw"})]}),e.jsxs("button",{onClick:()=>a("cancelled"),className:`p-8 rounded-lg border-2 transition-all ${r==="cancelled"?"bg-gray-600 border-gray-400 scale-105":"bg-gray-700 border-gray-600 hover:border-gray-400"}`,children:[e.jsx("div",{className:"text-3xl font-bold mb-2",children:"CANCEL"}),e.jsx("div",{className:"text-sm",children:"Cancelled Fight"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:R,disabled:!r,className:`flex-1 py-4 rounded-lg font-bold text-lg ${r?"bg-green-600 hover:bg-green-700":"bg-gray-600 cursor-not-allowed"}`,children:"âœ… Confirm Declaration"}),e.jsx("button",{onClick:()=>{d(!1),c(null),a(null)},className:"px-6 py-4 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold",children:"Cancel"})]})]})]})}),t[25]=R,t[26]=r,t[27]=l,t[28]=a,t[29]=c,t[30]=d,t[31]=E,t[32]=C):C=t[32];let S;return t[33]===Symbol.for("react.memo_cache_sentinel")?(S=showNextFightModal&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full",children:[e.jsxs("div",{className:"p-6 border-b border-gray-700",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Create Next Fight"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Event settings will be auto-populated from the previous fight"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Event Name"}),e.jsx("input",{type:"text",value:eventName,onChange:G,placeholder:"Enter event name",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-yellow-500"}),eventName&&lastEventName&&eventName!==lastEventName&&e.jsxs("div",{className:"mt-2 p-3 bg-yellow-900/30 border border-yellow-600 rounded-lg",children:[e.jsxs("p",{className:"text-yellow-400 text-sm font-semibold flex items-center gap-2",children:[e.jsx("span",{children:"âš ï¸"}),e.jsx("span",{children:"New Event Detected - Fight will start at #1"})]}),e.jsxs("p",{className:"text-yellow-400/80 text-xs mt-1",children:['Previous event: "',lastEventName,'"']})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Meron Fighter"}),e.jsx("input",{type:"text",value:meronFighter,onChange:B,placeholder:"Enter Meron fighter name",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Wala Fighter"}),e.jsx("input",{type:"text",value:walaFighter,onChange:U,placeholder:"Enter Wala fighter name",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 text-sm text-gray-300",children:[e.jsx("p",{className:"font-semibold mb-2",children:"ðŸ“‹ Auto-populated settings:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Fight number (auto-incremented)"}),e.jsx("li",{children:"Venue, Event name, Event date"}),e.jsx("li",{children:"Commission percentage, Match type"}),e.jsx("li",{children:"Revolving funds, Teller assignments"}),e.jsx("li",{children:"Special conditions (if any)"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:handleCreateNextFight,disabled:!meronFighter||!walaFighter,className:`flex-1 py-4 rounded-lg font-bold text-lg ${meronFighter&&walaFighter?"bg-blue-600 hover:bg-blue-700":"bg-gray-600 cursor-not-allowed"}`,children:"âž• Create Fight"}),e.jsx("button",{onClick:H,className:"px-6 py-4 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold",children:"Cancel"})]})]})]})}),t[33]=S):S=t[33],e.jsxs(z,{children:[b,h,u,e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6 mb-6 lg:mb-8",children:[e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 lg:p-6 border border-gray-700",children:[f,e.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-yellow-400",children:A.length}),p]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 lg:p-6 border border-gray-700",children:[y,e.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-green-400",children:$}),N]}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 lg:p-6 border border-gray-700",children:[j,e.jsx("div",{className:"text-3xl lg:text-4xl font-bold",children:m.length}),v]})]}),w,F,C,S]})}function H(){setShowNextFightModal(!1),setMeronFighter(""),setWalaFighter("")}function U(s){return setWalaFighter(s.target.value)}function B(s){return setMeronFighter(s.target.value)}function G(s){return setEventName(s.target.value)}function V(s){return e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"font-semibold",children:["Fight #",s.fight_number]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${s.result==="meron"?"bg-red-600":s.result==="wala"?"bg-blue-600":s.result==="draw"?"bg-green-600":"bg-gray-600"}`,children:s.result?.toUpperCase()||"N/A"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[s.meron_fighter," vs ",s.wala_fighter]})]}),s.declared_at&&e.jsx("div",{className:"text-xs text-gray-500",children:new Date(s.declared_at).toLocaleString()})]},s.id)}function q(s){return s.result}function J(s){return s.result}function K(s){return s.declared_by}function Q(s){return s.status==="betting_closed"}function X(){const s=setInterval(Y,3e3);return()=>clearInterval(s)}function Y(){W.reload({only:["fights"]})}export{se as default};
