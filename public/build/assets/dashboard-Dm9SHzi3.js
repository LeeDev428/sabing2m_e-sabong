import{c as q,r as g,j as s,a as P,H as J}from"./app-DN2vrtEh.js";import{D as K}from"./declarator-layout-xAfI9EKk.js";import"./app-C9LunIZD.js";function ne(t){const e=q.c(47),{fights:U}=t,f=U===void 0?[]:U,[$,i]=g.useState(!1),[W,b]=g.useState(!1),[l,o]=g.useState(null),[a,n]=g.useState(null),[d,x]=g.useState(""),[c,m]=g.useState("");let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p=[],e[0]=p):p=e[0],g.useEffect(se,p);const T=f.filter(ee),B=f.filter(Z).length;let y;e[1]!==a||e[2]!==l||e[3]!==n||e[4]!==o||e[5]!==i?(y=()=>{!l||!a||P.post("/declarator/results",{fight_id:l.id,result:a},{onSuccess:()=>{i(!1),o(null),n(null)}})},e[1]=a,e[2]=l,e[3]=n,e[4]=o,e[5]=i,e[6]=y):y=e[6];const I=y;let j;e[7]!==d||e[8]!==x||e[9]!==b||e[10]!==m||e[11]!==c?(j=()=>{!d||!c||P.post("/declarator/fights/create-next",{meron_fighter:d,wala_fighter:c},{onSuccess:()=>{b(!1),x(""),m("")}})},e[7]=d,e[8]=x,e[9]=b,e[10]=m,e[11]=c,e[12]=j):j=e[12];const O=j;let N,v;e[13]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx(J,{title:"Declarator Dashboard"}),v=s.jsx("br",{}),e[13]=N,e[14]=v):(N=e[13],v=e[14]);let _;e[15]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx("div",{className:"mb-6 lg:mb-8 flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl lg:text-3xl font-bold",children:"Declarator Dashboard"}),s.jsx("p",{className:"text-sm lg:text-base text-gray-400",children:"Declare fight results and manage outcomes"})]})}),e[15]=_):_=e[15];let w;e[16]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx("div",{className:"text-xs lg:text-sm text-gray-400 mb-2",children:"Pending Results"}),e[16]=w):w=e[16];let S;e[17]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Fights awaiting declaration"}),e[17]=S):S=e[17];let F;e[18]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsx("div",{className:"text-xs lg:text-sm text-gray-400 mb-2",children:"Declared Today"}),e[18]=F):F=e[18];let C;e[19]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Results declared today"}),e[19]=C):C=e[19];let D;e[20]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx("div",{className:"text-xs lg:text-sm text-gray-400 mb-2",children:"Total Fights"}),e[20]=D):D=e[20];let A;e[21]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"All fight events"}),e[21]=A):A=e[21];let R;e[22]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsxs("div",{className:"p-4 lg:p-6 border-b border-gray-700",children:[s.jsx("h2",{className:"text-lg lg:text-xl font-bold",children:"Pending Declarations"}),s.jsx("p",{className:"text-xs lg:text-sm text-gray-400",children:"Fights with closed betting awaiting result declaration"})]}),e[22]=R):R=e[22];const z=T.length>0?s.jsx("div",{className:"space-y-4",children:T.map(r=>s.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 flex items-center justify-between hover:bg-gray-600 transition-colors",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsxs("span",{className:"font-bold text-lg",children:["Fight #",r.fight_number]}),s.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-yellow-600",children:"â±ï¸ AWAITING RESULT"})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm mb-2",children:[s.jsxs("span",{className:"text-red-400 font-medium",children:["MERON: ",r.meron_fighter," (",r.meron_odds||"N/A",")"]}),s.jsx("span",{className:"text-gray-500",children:"vs"}),s.jsxs("span",{className:"text-blue-400 font-medium",children:["WALA: ",r.wala_fighter," (",r.wala_odds||"N/A",")"]})]}),r.betting_closed_at&&s.jsxs("div",{className:"text-xs text-gray-500",children:["Betting closed: ",new Date(r.betting_closed_at).toLocaleString()]})]}),s.jsx("button",{onClick:()=>{o(r),i(!0)},className:"px-6 py-3 bg-green-600 hover:bg-green-700 rounded-lg font-semibold",children:"ðŸ† Declare Result"})]},r.id))}):s.jsx("div",{className:"text-center py-12 text-gray-400",children:"No pending declarations. All fights have been processed."});let k;e[23]!==z?(k=s.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700",children:[R,s.jsx("div",{className:"p-4 lg:p-6",children:z})]}),e[23]=z,e[24]=k):k=e[24];const G="mt-8 bg-gray-800 rounded-lg border border-gray-700";let h;e[25]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsxs("div",{className:"p-6 border-b border-gray-700",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Recent Declarations"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Latest declared fight results"})]}),e[25]=h):h=e[25];const V="p-6",H=f.filter(Y).length>0?s.jsx("div",{className:"space-y-3",children:f.filter(X).slice(0,5).map(Q)}):s.jsx("div",{className:"text-center py-8 text-gray-400",children:"No declared results yet"});let u;e[26]!==H?(u=s.jsx("div",{className:V,children:H}),e[26]=H,e[27]=u):u=e[27];let E;e[28]!==h||e[29]!==u?(E=s.jsxs("div",{className:G,children:[h,u]}),e[28]=h,e[29]=u,e[30]=E):E=e[30];let M;e[31]!==I||e[32]!==a||e[33]!==l||e[34]!==n||e[35]!==o||e[36]!==i||e[37]!==$?(M=$&&l&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full",children:[s.jsxs("div",{className:"p-6 border-b border-gray-700",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Declare Fight Result"}),s.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Fight #",l.fight_number,": ",l.meron_fighter," vs ",l.wala_fighter]})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[s.jsxs("button",{onClick:()=>n("meron"),className:`p-8 rounded-lg border-2 transition-all ${a==="meron"?"bg-red-600 border-red-400 scale-105":"bg-gray-700 border-gray-600 hover:border-red-400"}`,children:[s.jsx("div",{className:"text-3xl font-bold mb-2",children:"MERON"}),s.jsx("div",{className:"text-sm",children:l.meron_fighter}),s.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Odds: ",l.meron_odds||"N/A"]})]}),s.jsxs("button",{onClick:()=>n("wala"),className:`p-8 rounded-lg border-2 transition-all ${a==="wala"?"bg-blue-600 border-blue-400 scale-105":"bg-gray-700 border-gray-600 hover:border-blue-400"}`,children:[s.jsx("div",{className:"text-3xl font-bold mb-2",children:"WALA"}),s.jsx("div",{className:"text-sm",children:l.wala_fighter}),s.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Odds: ",l.wala_odds||"N/A"]})]}),s.jsxs("button",{onClick:()=>n("draw"),className:`p-8 rounded-lg border-2 transition-all ${a==="draw"?"bg-green-600 border-green-400 scale-105":"bg-gray-700 border-gray-600 hover:border-green-400"}`,children:[s.jsx("div",{className:"text-3xl font-bold mb-2",children:"DRAW"}),s.jsx("div",{className:"text-sm",children:"Match Draw"})]}),s.jsxs("button",{onClick:()=>n("cancelled"),className:`p-8 rounded-lg border-2 transition-all ${a==="cancelled"?"bg-gray-600 border-gray-400 scale-105":"bg-gray-700 border-gray-600 hover:border-gray-400"}`,children:[s.jsx("div",{className:"text-3xl font-bold mb-2",children:"CANCEL"}),s.jsx("div",{className:"text-sm",children:"Cancelled Fight"})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:I,disabled:!a,className:`flex-1 py-4 rounded-lg font-bold text-lg ${a?"bg-green-600 hover:bg-green-700":"bg-gray-600 cursor-not-allowed"}`,children:"âœ… Confirm Declaration"}),s.jsx("button",{onClick:()=>{i(!1),o(null),n(null)},className:"px-6 py-4 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold",children:"Cancel"})]})]})]})}),e[31]=I,e[32]=a,e[33]=l,e[34]=n,e[35]=o,e[36]=i,e[37]=$,e[38]=M):M=e[38];let L;return e[39]!==O||e[40]!==d||e[41]!==x||e[42]!==b||e[43]!==m||e[44]!==W||e[45]!==c?(L=W&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full",children:[s.jsxs("div",{className:"p-6 border-b border-gray-700",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Create Next Fight"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Event settings will be auto-populated from the previous fight"})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Meron Fighter"}),s.jsx("input",{type:"text",value:d,onChange:r=>x(r.target.value),placeholder:"Enter Meron fighter name",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-red-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Wala Fighter"}),s.jsx("input",{type:"text",value:c,onChange:r=>m(r.target.value),placeholder:"Enter Wala fighter name",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:border-blue-500"})]}),s.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 text-sm text-gray-300",children:[s.jsx("p",{className:"font-semibold mb-2",children:"ðŸ“‹ Auto-populated settings:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:"Fight number (auto-incremented)"}),s.jsx("li",{children:"Venue, Event name, Event date"}),s.jsx("li",{children:"Commission percentage, Match type"}),s.jsx("li",{children:"Revolving funds, Teller assignments"}),s.jsx("li",{children:"Special conditions (if any)"})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:O,disabled:!d||!c,className:`flex-1 py-4 rounded-lg font-bold text-lg ${d&&c?"bg-blue-600 hover:bg-blue-700":"bg-gray-600 cursor-not-allowed"}`,children:"âž• Create Fight"}),s.jsx("button",{onClick:()=>{b(!1),x(""),m("")},className:"px-6 py-4 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold",children:"Cancel"})]})]})]})}),e[39]=O,e[40]=d,e[41]=x,e[42]=b,e[43]=m,e[44]=W,e[45]=c,e[46]=L):L=e[46],s.jsxs(K,{children:[N,v,_,s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6 mb-6 lg:mb-8",children:[s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 lg:p-6 border border-gray-700",children:[w,s.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-yellow-400",children:T.length}),S]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 lg:p-6 border border-gray-700",children:[F,s.jsx("div",{className:"text-3xl lg:text-4xl font-bold text-green-400",children:B}),C]}),s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 lg:p-6 border border-gray-700",children:[D,s.jsx("div",{className:"text-3xl lg:text-4xl font-bold",children:f.length}),A]})]}),k,E,M,L]})}function Q(t){return s.jsxs("div",{className:"bg-gray-700 rounded-lg p-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("span",{className:"font-semibold",children:["Fight #",t.fight_number]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${t.result==="meron"?"bg-red-600":t.result==="wala"?"bg-blue-600":t.result==="draw"?"bg-green-600":"bg-gray-600"}`,children:t.result?.toUpperCase()||"N/A"})]}),s.jsxs("div",{className:"text-sm text-gray-400",children:[t.meron_fighter," vs ",t.wala_fighter]})]}),t.declared_at&&s.jsx("div",{className:"text-xs text-gray-500",children:new Date(t.declared_at).toLocaleString()})]},t.id)}function X(t){return t.result}function Y(t){return t.result}function Z(t){return t.declared_by}function ee(t){return t.status==="betting_closed"}function se(){const t=setInterval(te,3e3);return()=>clearInterval(t)}function te(){P.reload({only:["fights"]})}export{ne as default};
