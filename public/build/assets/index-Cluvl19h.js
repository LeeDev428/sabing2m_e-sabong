import{c as I,r as D,j as t,a as k,H as T}from"./app-BrDh2Nz6.js";import{A as U}from"./admin-layout-BjHRKBC0.js";import"./app-BFk9JCA7.js";function Y(F){const e=I.c(46),{events:n}=F,[$,f]=D.useState(!1),[A,M]=D.useState(!1),[r,O]=D.useState(null);let y;e[0]===Symbol.for("react.memo_cache_sentinel")?(y={name:"",event_date:new Date().toISOString().split("T")[0],revolving_funds:"",notes:""},e[0]=y):y=e[0];const[s,o]=D.useState(y);let d,c,m,i;if(e[1]!==r||e[2]!==s.event_date||e[3]!==s.name||e[4]!==s.notes||e[5]!==s.revolving_funds){m=l=>{l.preventDefault(),r?k.put(`/admin/events/${r.id}`,{revolving_funds:parseFloat(s.revolving_funds),notes:s.notes},{onSuccess:()=>{O(null),f(!1),i()}}):M(!0)},c=()=>{k.post("/admin/events",{name:s.name,event_date:s.event_date,revolving_funds:parseFloat(s.revolving_funds),notes:s.notes},{onSuccess:()=>{f(!1),M(!1),i()}})};let a;e[10]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{M(!1)},e[10]=a):a=e[10],d=a,i=()=>{o({name:"",event_date:new Date().toISOString().split("T")[0],revolving_funds:"",notes:""})},e[1]=r,e[2]=s.event_date,e[3]=s.name,e[4]=s.notes,e[5]=s.revolving_funds,e[6]=d,e[7]=c,e[8]=m,e[9]=i}else d=e[6],c=e[7],m=e[8],i=e[9];let v;e[11]===Symbol.for("react.memo_cache_sentinel")?(v=a=>{O(a),o({name:a.name,event_date:a.event_date,revolving_funds:a.revolving_funds.toString(),notes:a.notes||""}),f(!0)},e[11]=v):v=e[11];const q=v;let j;e[12]!==i?(j=()=>{f(!1),O(null),i()},e[12]=i,e[13]=j):j=e[13];const R=j,L=z;let N;e[14]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx(T,{title:"Event Management"}),e[14]=N):N=e[14];let w,_;e[15]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Event Management"}),t.jsx("p",{className:"text-gray-400",children:"Create and manage events with revolving funds"})]}),_=()=>f(!0),e[15]=w,e[16]=_):(w=e[15],_=e[16]);let C;e[17]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx("div",{className:"mb-8",children:t.jsxs("div",{className:"flex items-center justify-between",children:[w,t.jsxs("button",{onClick:_,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold flex items-center gap-2",children:[t.jsx("span",{children:"üìÖ"})," Create New Event"]})]})}),e[17]=C):C=e[17];let S;e[18]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx("thead",{className:"bg-gray-900",children:t.jsxs("tr",{children:[t.jsx("th",{className:"text-left px-6 py-4 text-gray-400 font-semibold",children:"Event Name"}),t.jsx("th",{className:"text-left px-6 py-4 text-gray-400 font-semibold",children:"Event Date"}),t.jsx("th",{className:"text-right px-6 py-4 text-gray-400 font-semibold",children:"Revolving Funds"}),t.jsx("th",{className:"text-center px-6 py-4 text-gray-400 font-semibold",children:"Fights"}),t.jsx("th",{className:"text-center px-6 py-4 text-gray-400 font-semibold",children:"Status"}),t.jsx("th",{className:"text-left px-6 py-4 text-gray-400 font-semibold",children:"Notes"}),t.jsx("th",{className:"text-center px-6 py-4 text-gray-400 font-semibold",children:"Actions"})]})}),e[18]=S):S=e[18];let x;if(e[19]!==n.data){let a;e[21]===Symbol.for("react.memo_cache_sentinel")?(a=l=>t.jsxs("tr",{className:"hover:bg-gray-750",children:[t.jsx("td",{className:"px-6 py-4 text-white font-medium",children:l.name}),t.jsx("td",{className:"px-6 py-4 text-gray-300",children:L(l.event_date)}),t.jsx("td",{className:"px-6 py-4 text-right",children:t.jsxs("span",{className:"text-green-400 font-semibold",children:["‚Ç±",l.revolving_funds.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})}),t.jsx("td",{className:"px-6 py-4 text-center",children:t.jsxs("span",{className:"bg-gray-700 px-3 py-1 rounded-full text-sm",children:[l.fights_count," fights"]})}),t.jsx("td",{className:"px-6 py-4 text-center",children:t.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${l.status==="active"?"bg-green-900/50 text-green-400":l.status==="completed"?"bg-blue-900/50 text-blue-400":"bg-red-900/50 text-red-400"}`,children:l.status})}),t.jsx("td",{className:"px-6 py-4 text-gray-400 text-sm",children:l.notes?t.jsx("span",{className:"line-clamp-1",title:l.notes,children:l.notes}):t.jsx("span",{className:"text-gray-600 italic",children:"No notes"})}),t.jsx("td",{className:"px-6 py-4 text-center",children:l.status==="active"?t.jsx("button",{onClick:()=>q(l),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium",children:"Edit"}):t.jsx("button",{onClick:()=>{alert(`Event: ${l.name}
Date: ${L(l.event_date)}
Revolving Funds: ‚Ç±${l.revolving_funds.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}
Fights: ${l.fights_count}
Status: ${l.status}
Notes: ${l.notes||"No notes"}

This event is ${l.status}. Only active events can be edited.`)},className:"bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-lg text-sm font-medium",children:"üëÅÔ∏è View"})})]},l.id),e[21]=a):a=e[21],x=n.data.map(a),e[19]=n.data,e[20]=x}else x=e[20];let g;e[22]!==x?(g=t.jsxs("table",{className:"w-full",children:[S,t.jsx("tbody",{className:"divide-y divide-gray-700",children:x})]}),e[22]=x,e[23]=g):g=e[23];let h;e[24]!==n.current_page||e[25]!==n.data.length||e[26]!==n.last_page||e[27]!==n.total?(h=n.last_page>1&&t.jsxs("div",{className:"bg-gray-900 px-6 py-4 flex items-center justify-between border-t border-gray-700",children:[t.jsxs("div",{className:"text-gray-400 text-sm",children:["Showing ",n.data.length," of ",n.total," events"]}),t.jsxs("div",{className:"flex gap-2",children:[n.current_page>1&&t.jsx("button",{onClick:()=>k.get(`/admin/events?page=${n.current_page-1}`),className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm",children:"Previous"}),t.jsxs("span",{className:"text-gray-400 px-4 py-2",children:["Page ",n.current_page," of ",n.last_page]}),n.current_page<n.last_page&&t.jsx("button",{onClick:()=>k.get(`/admin/events?page=${n.current_page+1}`),className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm",children:"Next"})]})]}),e[24]=n.current_page,e[25]=n.data.length,e[26]=n.last_page,e[27]=n.total,e[28]=h):h=e[28];let u;e[29]!==g||e[30]!==h?(u=t.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[g,h]}),e[29]=g,e[30]=h,e[31]=u):u=e[31];let p;e[32]!==r||e[33]!==s||e[34]!==R||e[35]!==m||e[36]!==$?(p=$&&t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 max-w-md w-full mx-4",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:r?"Edit Event":"Create New Event"}),t.jsxs("form",{onSubmit:m,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-400 mb-2",children:"Event Name"}),t.jsx("input",{type:"text",value:s.name,onChange:a=>o({...s,name:a.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",placeholder:"e.g., Championship 2024",required:!0,disabled:!!r}),r&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Event name cannot be changed"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-400 mb-2",children:"Event Date"}),t.jsx("input",{type:"date",value:s.event_date,onChange:a=>o({...s,event_date:a.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",required:!0,disabled:!!r}),r&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Event date cannot be changed"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-400 mb-2",children:"Revolving Funds"}),t.jsx("input",{type:"number",step:"0.01",min:"0",value:s.revolving_funds,onChange:a=>o({...s,revolving_funds:a.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",placeholder:"0.00",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-gray-400 mb-2",children:"Notes (Optional)"}),t.jsx("textarea",{value:s.notes,onChange:a=>o({...s,notes:a.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white",placeholder:"Additional notes about this event...",rows:3})]}),t.jsxs("div",{className:"flex gap-3 pt-4",children:[t.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold",children:r?"Update Event":"Create Event"}),t.jsx("button",{type:"button",onClick:R,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})}),e[32]=r,e[33]=s,e[34]=R,e[35]=m,e[36]=$,e[37]=p):p=e[37];let b;e[38]!==d||e[39]!==c||e[40]!==A?(b=A&&t.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 max-w-md w-full mx-4 border-2 border-yellow-500",children:[t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("div",{className:"text-6xl mb-4",children:"‚ö†Ô∏è"}),t.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Confirm Event Creation"}),t.jsx("p",{className:"text-gray-300 text-lg mb-2",children:"Creating a new event will close/end the previous event."}),t.jsx("p",{className:"text-yellow-400 text-sm",children:"Are you sure you want to proceed?"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{type:"button",onClick:d,className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white py-3 rounded-lg font-semibold",children:"No, Cancel"}),t.jsx("button",{type:"button",onClick:c,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-semibold",children:"Yes, Create"})]})]})}),e[38]=d,e[39]=c,e[40]=A,e[41]=b):b=e[41];let E;return e[42]!==u||e[43]!==p||e[44]!==b?(E=t.jsxs(U,{children:[N,C,u,p,b]}),e[42]=u,e[43]=p,e[44]=b,e[45]=E):E=e[45],E}function z(F){return new Date(F).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}export{Y as default};
